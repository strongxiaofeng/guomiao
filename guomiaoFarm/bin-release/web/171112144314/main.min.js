var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),AItemRenderer=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemove,e),e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.onRemove=function(){},e}(eui.ItemRenderer);__reflect(AItemRenderer.prototype,"AItemRenderer");var BaseUI=function(t){function e(){var e=t.call(this)||this;return e.eventPool=[],e.addEventListener(egret.Event.COMPLETE,e.initSetting,e),e}return __extends(e,t),e.prototype.registerEvent=function(t,e,n,i){t.addEventListener(e,n,i),this.eventPool.push({target:t,type:e,callback:n,callbackobj:i})},e.prototype.clearEvent=function(){if(this.eventPool.length>0)for(var t=0;t<this.eventPool.length;t++){var e=this.eventPool[t].target,n=this.eventPool[t].type,i=this.eventPool[t].callback,o=this.eventPool[t].callbackobj;e.removeEventListener(n,i,o)}},e.prototype.initSetting=function(){this.isShow=!0,this.initListener()},e.prototype.initListener=function(){},e.prototype.addRegister=function(t,e,n){NotifyManager.getInstance().registerNotify(t,e,n)},e.prototype.removeRegister=function(t){NotifyManager.getInstance().removeRegister(t)},e.prototype.dispose=function(){this.isShow=!1,this.clearEvent(),this.parent&&this.parent.removeChild(this)},e}(eui.Component);__reflect(BaseUI.prototype,"BaseUI");var EventObj=function(){function t(){}return t}();__reflect(EventObj.prototype,"EventObj");var PayGoodsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/payGoodsItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){var t=this.data.itemdata;if(t){var e=this.data.count;this.titleTxt.text=t.name,this.descTxt.text=t.desc,this.costTxt.text=t.buy_gold+"",this.countTxt.text="X"+e}},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(PayGoodsItem.prototype,"PayGoodsItem");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?i(o):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BaseResponse=function(){function t(){}return t}();__reflect(BaseResponse.prototype,"BaseResponse");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function o(t){e.call(i,t)}function r(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ErrorCode=function(){function t(){}return t.codes={0:"操作成功",1:"参数解析异常",2:"参数错误",3:"发送数据编码错误",4:"保存数据库失败",5:"在数据库中未找到",6:"用户不存在",7:"用户已禁用",8:"未登录",9:"密码错误",10:"用户未注册",11:"验证码错误",12:"用户已注册",13:"注册失败",14:"密码错误",15:"缺少token",16:"金钱不够",17:"在配置表中未找到",18:"服务器错误",19:"短信错误",20:"同时操作",21:"物品数量不够",22:"不能购买多个",23:"redis加锁key空",24:"保存分销返点错误",25:"请等待对方确认",26:"交易计算提成后数量错误",27:"物品类型错误",28:"用户已禁用或未找到",29:"不能偷",30:"道具配置表数量错误",31:"没有买狗",32:"狗 到达最大等级",33:"蛋不够",34:"拥有的鸡达到上限",35:"没蛋",36:"今天已偷过蛋",37:"交易已完成错误",38:"达到当日最大鸡蛋交易量",39:"非法关键字，内容不合法",40:"支付错误",41:"已购买礼包",1046:"不是好友",1009:"等级限制",1022:"已经添加好友",1023:"这个好友请求已经回复过",1024:"没有可偷取的数量",1025:"已经发送好友申请",1032:"手机号码错误",1034:"被交易用户不存在",1036:"用户不在线",1037:"消息为空",1038:"支付密码错误",1040:"没有小狗",1041:"达到用户最大等级",1042:"不能给同自己交易",1043:"配置错误",1049:"发送验证码错误",1050:"已经添加种子",1051:"时间限制",1052:"已经添加肥料",1053:"已经签到",1054:"不需要补签",1055:"已点赞",1056:"次数限制"},t}();__reflect(ErrorCode.prototype,"ErrorCode");var NotifyConst=function(){function t(){}return t.Notify_UserInfo="Notify_UserInfo",t.Notify_StoreInfo="Notify_StoreInfo",t.Notify_LandInfo="Notify_LandInfo",t.Notify_SeedResult="Notify_SeedResult",t.Notify_GatherResult="Notify_GatherResult",t.Notify_StealResult="Notify_StealResult",t.Notify_OperLandResult="Notify_OperLandResult",t.Notify_WaterOtherLandResult="Notify_WaterOtherLandResult",t.Notify_OrderList="Notify_OrderList",t.Notify_OrderResult="Notify_OrderResult",t.Notify_OrderPayResult="Notify_OrderPayResult",t.Notify_SureReceiveResult="Notify_SureReceiveResult",t.Notify_DeleteReceivedOrderResult="Notify_DeleteReceivedOrderResult",t.Notify_SignResult="Notify_SignResult",t.Notify_SignList="Notify_SignList",t.Notify_GetContinueSignRewardResult="Notify_GetContinueSignRewardResult",t.Notify_NoticeList="Notify_NoticeList",t.Notify_AddressList="Notify_AddressList",t.Notify_AddAddress="Notify_AddAddress",t.Notify_EditAddress="Notify_EditAddress",t.Notify_DeleteAddress="Notify_DeleteAddress",t.Notify_setDefaultAddress="Notify_setDefaultAddress",t.Notify_HonorList="Notify_HonorList",t.Notify_GetHonorReward="Notify_GetHonorReward",t.Notify_YesterdayHarvestRank="Notify_YesterdayHarvestRank",t.Notify_YesterdayHarvestDetail="Notify_YesterdayHarvestDetail",t.Notify_ContributeList="Notify_ContributeList",t.Notify_RankList="Notify_RankList",t.Notify_MyRankInFriends="Notify_MyRankInFriends",t.Notify_FriendList="Notify_FriendList",t.Notify_FindUser="Notify_FindUser",t.Notify_AddUser="Notify_AddUser",t.Notify_FriendRespondList="Notify_FriendRespondList",t.Notify_AgreeOrRefuseAddFriend="Notify_AgreeOrRefuseAddFriend",t.Notify_AgreeOrRefuseAddFriendList="Notify_AgreeOrRefuseAddFriendList",t.Notify_ThumbsUp="Notify_ThumbsUp",t.Notify_PlayGame="Notify_PlayGame",t.Notify_Error="Notify_Error",t.Notify_Green="Notify_Green",t.Notify_ShopCar="Notify_ShopCar",t.Notify_MyRankInAll="Notify_MyRankInAll",t}();__reflect(NotifyConst.prototype,"NotifyConst");var UIConst=function(){function t(){}return t.LoadingUI="LoadingUI",t.WelcomeUI="WelcomeUI",t.RuleUI="RuleUI",t.TopBarUI="TopBarUI",t.HomeUI="HomeUI",t.LastActivityUI="LastActivityUI",t.UserMenuUI="UserMenuUI",t.LastHarvestRankUI="LastHarvestRankUI",t.ContributeDetailUI="ContributeDetailUI",t.ContributeDetailDescUI="ContributeDetailDescUI",t.CoinDetailUI="CoinDetailUI",t.CoinDetailDescUI="CoinDetailDescUI",t.AddressManageUI="AddressManageUI",t.AddAddressUI="AddAddressUI",t.SignUI="SignUI",t.StoreUI="StoreUI",t.GiftUI="GiftUI",t.TipGetCoinUI="TipGetCoinUI",t.RadioUI="RadioUI",t.ShopUI="ShopUI",t.ShopCarDetailUI="ShopCarDetailUI",t.PayUI="PayUI",t.ChargeUI="ChargeUI",t.RankFriendContributeUI="RankFriendContributeUI",t.RankFriendCoinUI="RankFriendCoinUI",t.RankAllContributeUI="RankAllContributeUI",t.RankAllCoinUI="RankAllCoinUI",t.InviteWaterUI="InviteWaterUI",t.HonorWallUI="HonorWallUI",t.MyOrderUI="MyOrderUI",t.SetUI="SetUI",t.TipErrorUI="TipErrorUI",t.TipGreenUI="TipGreenUI",t.HonorDetailUI="HonorDetailUI",t.OtherUserDetailUI="OtherUserDetailUI",t.TipAddFriendUI="TipAddFriendUI",t.AddFriendUI="AddFriendUI",t.FriendRequestsUI="FriendRequestsUI",t.OtherLandUI="OtherLandUI",t.InviteDetailUI="InviteDetailUI",t.ShopSeedAlertUI="ShopSeedAlertUI",t.LeaveMsgUI="LeaveMsgUI",t}();__reflect(UIConst.prototype,"UIConst");var GameController=function(){function t(){this.sequence=0,this.key="jgo0AUOng7nbPbMf",this.serverAddress="http://60.205.229.120"}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.getSeq=function(){return this.sequence++,this.sequence},t.prototype.transformData=function(t){t.seq=this.getSeq();var e=JSON.stringify(t),n=MD5Util.parse(e+this.key),i=n.toUpperCase();return t.sign=i,t},t.prototype.sendHttp=function(t,e,n,i){var o=new XMLHttpRequest;o.open(e,n,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(t){switch(o.status){case 200:var e=JSON.parse(o.responseText);e.status>0&&NotifyManager.getInstance().sendNotify(NotifyConst.Notify_Error,ErrorCode.codes[e.status]),GameModel.getInstance().setServerTime(e.server_time),i.call(this,e)}},t=this.transformData(t),o.send("data="+JSON.stringify(t))},t.prototype.getUserInfo=function(t){console.log("发送openid "+t);var e={openid:t};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-user-info",function(t){t.status>0?console.log("获取用户信息失败",t):(GameModel.getInstance().userInfo=t.data,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_UserInfo,t.data))})},t.prototype.getStoreInfo=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/item-list",function(t){t.status>0?console.log("请求仓库失败",t):(GameModel.getInstance().storeInfo=t.data,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_StoreInfo,t.data))})},t.prototype.getFarmInfo=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=farm/land-list",function(t){t.status>0?console.log("请求土地失败",t):(GameModel.getInstance().landInfo=t.data,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_LandInfo,t.data))})},t.prototype.sendSeed=function(t){var e={item_db_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=farm/sow-seeds",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_SeedResult,t)})},t.prototype.sendGather=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=farm/gather-crop",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_GatherResult,t)})},t.prototype.sendSteal=function(t){var e={be_user_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=farm/steal",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_StealResult,t)})},t.prototype.sendOperLand=function(t){var e={type:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=farm/oper-land",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_OperLandResult,t)})},t.prototype.sendWaterOtherLand=function(t){var e={be_user_id:t,type:3,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=farm/oper-other-land",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_WaterOtherLandResult,t)})},t.prototype.getOrderList=function(t,e,n){var i={status:t,offset:e,page_count:n,token:GameModel.getInstance().getToken()};this.sendHttp(i,"POST",this.serverAddress+"/frontend/web/index.php?r=store/get-order-list",function(t){t.status>0?console.log("请求订单列表失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_OrderList,t.data)})},t.prototype.sendOrder=function(t,e,n){var i={address_id:t,item_list:e,user_message:n,token:GameModel.getInstance().getToken()};this.sendHttp(i,"POST",this.serverAddress+"/frontend/web/index.php?r=store/order",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_OrderResult,t)})},t.prototype.sendOrderPay=function(t){var e={order_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=store/pay",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_OrderPayResult,t)})},t.prototype.sendSureReceive=function(t){var e={order_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=store/receive",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_SureReceiveResult,t)})},t.prototype.sendDeleteReceivedOrder=function(t){var e={order_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=store/del",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_DeleteReceivedOrderResult,t)})},t.prototype.sendSign=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/sign",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_SignResult,t)})},t.prototype.getSignList=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/sign-list",function(t){t.status>0?console.log("请求签到列表失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_SignList,t.data)})},t.prototype.getContinueSignReward=function(t){var e={count:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-continue-sign-gift",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_GetContinueSignRewardResult,t)})},t.prototype.getAnnounceList=function(t,e){var n={offset:t,page_count:e,token:GameModel.getInstance().getToken()};this.sendHttp(n,"POST",this.serverAddress+"/frontend/web/index.php?r=comm/get-notice-list",function(t){t.status>0?console.log("请求公告列表失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_NoticeList,t.data)})},t.prototype.getAddressList=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-address-list",function(t){t.status>0?console.log("请求地址列表失败",t):(console.log("收到地址列表 ",t),GameModel.getInstance().addressList=t.data,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_AddressList,t.data))})},t.prototype.addAddress=function(t,e,n){var i={realname:t,phone:e,address:n,token:GameModel.getInstance().getToken()};this.sendHttp(i,"POST",this.serverAddress+"/frontend/web/index.php?r=user/add-address",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_AddAddress,t)})},t.prototype.editAddress=function(e,n,i,o){var r={id:e,realname:n,phone:i,address:o,token:GameModel.getInstance().getToken()};this.sendHttp(r,"POST",this.serverAddress+"/frontend/web/index.php?r=user/edit-address",function(e){t.getInstance().getAddressList(),NotifyManager.getInstance().sendNotify(NotifyConst.Notify_EditAddress,e)})},t.prototype.deleteAddress=function(e){var n={id:e,token:GameModel.getInstance().getToken()};this.sendHttp(n,"POST",this.serverAddress+"/frontend/web/index.php?r=user/del-address",function(e){t.getInstance().getAddressList()})},t.prototype.setDefaultAddress=function(e){var n={id:e,token:GameModel.getInstance().getToken()};this.sendHttp(n,"POST",this.serverAddress+"/frontend/web/index.php?r=user/default-address",function(e){t.getInstance().getAddressList()})},t.prototype.getHonorList=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-ach-list",function(t){t.status>0?console.log("请求徽章列表失败",t):(GameModel.getInstance().honorInfo=t.data,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_HonorList))})},t.prototype.getHonorReward=function(t){var e={config_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-ach-gift",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_GetHonorReward,t)})},t.prototype.getYesterdayHarvestRank=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/ranking-day-gold-list",function(t){t.status>0?console.log("请求昨日收成排行列表失败",t):(GameModel.getInstance().yesterdayRank=t.data,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_YesterdayHarvestRank,t.data))})},t.prototype.getYesterdayHarvestDetail=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-my-ranking-day-gold-detail",function(t){t.status>0?console.log("请求昨日收成明细失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_YesterdayHarvestDetail,t.data)})},t.prototype.getContributeList=function(t,e){var n={offset:t,page_count:e,token:GameModel.getInstance().getToken()};this.sendHttp(n,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-contribute-list",function(t){t.status>0?console.log("请求贡献度明细失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_ContributeList,t.data)})},t.prototype.getRankList=function(t,e,n){var i={offset:t,page_count:e,by_gold:n,token:GameModel.getInstance().getToken()};this.sendHttp(i,"POST",this.serverAddress+"/frontend/web/index.php?r=user/get-ranking-list",function(t){t.status>0?console.log("请求排行榜失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_RankList,t.data)})},t.prototype.getMyRankInAll=function(t){var e={by_gold:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/get-my-ranking",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_MyRankInAll,t)})},t.prototype.getMyRankInFriends=function(t){var e={by_gold:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/my-ranking",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_MyRankInFriends,t)})},t.prototype.getFriendList=function(t,e,n){var i={offset:t,page_count:e,by_gold:n,token:GameModel.getInstance().getToken()};this.sendHttp(i,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/get-friend-list",function(t){t.status>0?console.log("获取好友列表失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_FriendList,t.data)})},t.prototype.findUser=function(t){var e={search:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/find",function(t){t.status>0?console.log("查找用户失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_FindUser,t.data)})},t.prototype.addFriend=function(t){var e={be_user_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/add",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_AddUser,t)})},t.prototype.getFriendRespondList=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/get-respond-list",function(t){t.status>0?console.log("需要进行好友回复的列表 获取失败",t):NotifyManager.getInstance().sendNotify(NotifyConst.Notify_FriendRespondList,t.data)})},t.prototype.agreeOrRefuseAddFriend=function(t,e){var n={be_user_id:t,is_agree:e,token:GameModel.getInstance().getToken()};this.sendHttp(n,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/respond",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_AgreeOrRefuseAddFriend,t)})},t.prototype.respondAddFriendList=function(t,e){var n={be_user_id_list:t,is_agree:e,token:GameModel.getInstance().getToken()};this.sendHttp(n,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/respond-list",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_AgreeOrRefuseAddFriendList,t)})},t.prototype.thumbsUp=function(t){var e={be_user_id:t,token:GameModel.getInstance().getToken()};this.sendHttp(e,"POST",this.serverAddress+"/frontend/web/index.php?r=friend/thumbs-up",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_ThumbsUp,t)})},t.prototype.playGame=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=user/play-game",function(t){NotifyManager.getInstance().sendNotify(NotifyConst.Notify_PlayGame,t)})},t.prototype.getServerConfig=function(){var t={token:GameModel.getInstance().getToken()};this.sendHttp(t,"POST",this.serverAddress+"/frontend/web/index.php?r=comm/game-config",function(t){console.log("收到配置:",t),GameModel.getInstance().serverConfig=t.data})},t}();__reflect(GameController.prototype,"GameController");var LayerManager=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.initLayer=function(t){this.uiLayer=new eui.Group,this.topLayer=new eui.Group,this.tipLayer=new eui.Group,this.sysLayer=new eui.Group,this.uiLayer.touchThrough=!0,this.topLayer.touchThrough=!0,this.tipLayer.touchThrough=!0,this.sysLayer.touchThrough=!0,t.addChild(this.uiLayer),t.addChild(this.topLayer),t.addChild(this.tipLayer),t.addChild(this.sysLayer)},t.prototype.addUI=function(e,n){void 0===n&&(n=1);switch(n){case t.Layer_UI:this.uiLayer.addChild(e);break;case t.Layer_Top:this.topLayer.addChild(e);break;case t.Layer_Tip:this.tipLayer.addChild(e);break;case t.Layer_Sys:this.sysLayer.addChild(e)}},t.Layer_UI=1,t.Layer_Top=2,t.Layer_Tip=3,t.Layer_Sys=4,t}();__reflect(LayerManager.prototype,"LayerManager");var MusicManager=function(){function t(){}return t.playMusic=function(){if(this.isSoundOn)if(this.channel)this.channel.volume=1;else{var t=RES.getRes("bgm_mp3");this.channel=t.play(0,-1),this.registerPageActive()}},t.stopMusic=function(){this.channel&&(this.channel.volume=0)},t.registerPageActive=function(){if(!this.haveRegistered){this.haveRegistered=!0;var e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,n=e.replace(/hidden/i,"visibilitychange"),i=function(){document[e]?t.stopMusic():t.playMusic()};document.addEventListener(n,i)}},t.isSoundOn=!0,t.haveRegistered=!1,t}();__reflect(MusicManager.prototype,"MusicManager");var NotifyManager=function(){function t(){this.notifyPool={}}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.registerNotify=function(t,e,n){this.notifyPool[t]||(this.notifyPool[t]=[]),this.notifyPool[t].push({callback:e,callbackobj:n})},t.prototype.sendNotify=function(t,e){void 0===e&&(e=null);var n=this.notifyPool[t];if(n&&n.length>0)for(var i=0;i<n.length;i++)n[i].callback.apply(n[i].callbackobj,[e])},t.prototype.removeRegister=function(t){for(var e in this.notifyPool){var n=this.notifyPool[e];if(n&&n.length>0){for(var i=0;i<n.length;i++)n[i].callbackobj==t&&n.splice(i--,1);0==n.length&&delete this.notifyPool[e]}}},t}();__reflect(NotifyManager.prototype,"NotifyManager");var UIManager=function(){function t(){}return t.openUI=function(t,e){void 0===e&&(e=LayerManager.Layer_UI),e==LayerManager.Layer_UI&&this.checkLastUI();var n;if(this.pool[t])n=this.pool[t],LayerManager.getInstance().addUI(n,e),n.initSetting();else{var i=egret.getDefinitionByName(t);n=new i,n.layer=e,this.pool[t]=n,LayerManager.getInstance().addUI(n,e)}},t.checkLastUI=function(){for(var t in this.pool){var e=this.pool[t];e.layer==LayerManager.Layer_UI&&e.isShow&&e.dispose()}},t.isUIOpen=function(t){return this.pool[t]?this.pool[t].isShow:!1},t.closeUI=function(t){this.pool[t]&&this.pool[t].dispose()},t.pool={},t}();__reflect(UIManager.prototype,"UIManager");var GameModel=function(){function t(){this.isYesterdayRankGot=!1,this.shopCarData={}}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},Object.defineProperty(t.prototype,"curOtherUser",{set:function(t){this._otherUser=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentHonorItem",{set:function(t){this._currentHonorItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"honorInfo",{set:function(t){this._honorInfo=t},enumerable:!0,configurable:!0}),t.prototype.setServerTime=function(t){this._serverTime=t,this._serverTimeStartRecord=(new Date).getTime()},Object.defineProperty(t.prototype,"userInfo",{set:function(t){this._userinfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeInfo",{set:function(t){this._storeInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"landInfo",{set:function(t){this._landInfo=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverConfig",{set:function(t){this._serverConfig=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addressList",{set:function(t){this._addressList=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yesterdayRank",{set:function(t){this._yesterdayRank=t},enumerable:!0,configurable:!0}),t.prototype.addShopCarData=function(t){this.shopCarData[t]?this.shopCarData[t]++:this.shopCarData[t]=1,NotifyManager.getInstance().sendNotify(NotifyConst.Notify_ShopCar,this.shopCarData)},t.prototype.reduceShopCarData=function(t){this.shopCarData[t]&&this.shopCarData[t]--,0==this.shopCarData[t]&&delete this.shopCarData[t],NotifyManager.getInstance().sendNotify(NotifyConst.Notify_ShopCar,this.shopCarData)},t.prototype.clearShopCar=function(){this.shopCarData=[],NotifyManager.getInstance().sendNotify(NotifyConst.Notify_ShopCar,this.shopCarData)},t.prototype.getShopCarData=function(){return this.shopCarData},t.prototype.getItemById=function(t){return this._serverConfig&&this._serverConfig.item_list&&this._serverConfig.item_list[t]?this._serverConfig.item_list[t]:null},t.prototype.getCurOtherUser=function(){return this._otherUser},t.prototype.getUserInfo=function(){return this._userinfo},t.prototype.getHonorItemDetail=function(){return this._currentHonorItem},t.prototype.getHonorInfo=function(){return this._honorInfo},t.prototype.getHonorConfig=function(){return this._serverConfig.achievement_list},t.prototype.getGift=function(){return this._serverConfig.gift_bag},t.prototype.getLandInfo=function(){return this._landInfo},t.prototype.getSeedId=function(){if(this._storeInfo&&this._storeInfo.list&&this._storeInfo.list.length>0)for(var t=this._storeInfo.list,e=0;e<t.length;e++)if(1==t[e].type)return t[e].id;return 0},t.prototype.getShopItems=function(){var t=[];if(this._serverConfig&&this._serverConfig.store_list)for(var e in this._serverConfig.store_list)t.push(this._serverConfig.store_list[e]);return console.log("获取货物 ",t),t},t.prototype.getAddressList=function(){return console.log("获取地址 ",this._addressList),this._addressList},t.prototype.getDefaultAddress=function(){console.log("获取默认地址 ",this._addressList);var t=null;if(this._addressList&&this._addressList.list&&this._addressList.list.length>0){for(var e=this._addressList.list,n=0;n<e.length;n++)if(e[n].is_default){t=e[n];break}t||(t=e[0])}return t},t.prototype.getServerTime=function(){return Math.floor(((new Date).getTime()-this._serverTimeStartRecord)/1e3+this._serverTime)},t.prototype.getTreeYoungTime=function(t){var e=this._serverConfig.crop_list;for(var n in e)if(n==t)return e[n].seedling_time;return 0},t.prototype.getTreeGrowTime=function(t){var e=this._serverConfig.crop_list;for(var n in e)if(n==t)return e[n].grow_time+e[n].seedling_time;return 0},t.prototype.getTreeRipeTime=function(t){var e=this._serverConfig.crop_list;for(var n in e)if(n==t)return e[n].ripe_time+e[n].grow_time+e[n].seedling_time;return 0},t.prototype.getYesterdayRank=function(){return this._yesterdayRank},t.prototype.getNickname=function(){return this._userinfo?this._userinfo.nickname:""},t.prototype.getToken=function(){return this._userinfo?this._userinfo.token:""},t.prototype.getId=function(){return this._userinfo?this._userinfo.id:""},t.prototype.getGold=function(){return this._userinfo?this._userinfo.gold:0},t.prototype.getLevel=function(){return this._userinfo?this._userinfo.level:0},t.prototype.getContribute=function(){return this._userinfo?this._userinfo.exp:0},t.prototype.getTotalContribute=function(){return this._userinfo?this._userinfo.total_exp:0},t}();__reflect(GameModel.prototype,"GameModel");var TipErrorUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/tipError.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.errorTxt.text=""},e.prototype.initListener=function(){this.addRegister(NotifyConst.Notify_Error,this.showError,this)},e.prototype.showError=function(t){var e=this;egret.Tween.removeTweens(this.errorTxt),this.errorTxt.text=t,this.errorTxt.alpha=1,egret.Tween.get(this.errorTxt).to({alpha:0},1e3).call(function(){e.errorTxt.alpha=1,e.errorTxt.text="",egret.Tween.removeTweens(e.errorTxt)})},e}(BaseUI);__reflect(TipErrorUI.prototype,"TipErrorUI");var TipGetCoinUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/tipGetCoin.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){this.registerEvent(this,egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(TipGetCoinUI.prototype,"TipGetCoinUI");var TipGreenUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/tipGreen.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.txt.text=""},e.prototype.initListener=function(){this.addRegister(NotifyConst.Notify_Green,this.showGreen,this)},e.prototype.showGreen=function(t){var e=this;egret.Tween.removeTweens(this.txt),this.txt.text=t,this.txt.verticalCenter=0,egret.Tween.get(this.txt).to({verticalCenter:-50},1e3).call(function(){e.txt.text="",e.txt.verticalCenter=0,egret.Tween.removeTweens(e.txt)})},e}(BaseUI);__reflect(TipGreenUI.prototype,"TipGreenUI");var WelcomeUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/startUI.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),UIManager.openUI(UIConst.TipErrorUI,LayerManager.Layer_Sys),UIManager.openUI(UIConst.TipGreenUI,LayerManager.Layer_Sys),MusicManager.playMusic()},e.prototype.initListener=function(){this.registerEvent(this.btn_myFarm,egret.TouchEvent.TOUCH_TAP,this.clickFarm,this),this.registerEvent(this.btn_lastActivity,egret.TouchEvent.TOUCH_TAP,this.clickActivity,this),this.registerEvent(this.btn_rule,egret.TouchEvent.TOUCH_TAP,this.clickRule,this)},e.prototype.clickFarm=function(){UIManager.openUI(UIConst.HomeUI)},e.prototype.clickActivity=function(){UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top),UIManager.openUI(UIConst.LastActivityUI)},e.prototype.clickRule=function(){UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top),UIManager.openUI(UIConst.RuleUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(WelcomeUI.prototype,"WelcomeUI");var AddAddressUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/addAddress.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){this.registerEvent(this.saveBtn,egret.TouchEvent.TOUCH_TAP,this.clickSave,this),this.addRegister(NotifyConst.Notify_AddAddress,this.onAddCallback,this)},e.prototype.clickSave=function(){GameController.getInstance().addAddress(this.input_name.text,this.input_num.text,this.input_zone.text+this.input_address.text)},e.prototype.onAddCallback=function(t){0==t.status&&UIManager.openUI(UIConst.AddressManageUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(AddAddressUI.prototype,"AddAddressUI");var AddressListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/addressItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.editTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEdit,this),this.editIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEdit,this),this.deleteTxt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this),this.deleteIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this),this.selectIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this)},e.prototype.dataChanged=function(){var t=this.data;this.nameTxt.text=t.realname,this.numTxt.text=t.phone,this.addressTxt.text=t.address,this.selectIcon.source=t.is_default?"selected_png":"select_no_png"
},e.prototype.onEdit=function(){console.log(" 编辑")},e.prototype.onDelete=function(){var t=this.data;GameController.getInstance().deleteAddress(t.id)},e.prototype.onSelect=function(){var t=this.data;GameController.getInstance().setDefaultAddress(t.id)},e.prototype.onRemove=function(){this.editTxt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEdit,this),this.editIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onEdit,this),this.deleteTxt.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this),this.deleteIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDelete,this),this.selectIcon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelect,this)},e}(AItemRenderer);__reflect(AddressListItem.prototype,"AddressListItem");var AddressManageUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/addressManage.exml",e.addressList.itemRenderer=AddressListItem,e.addressList.useVirtualLayout=!1,e.ac=new eui.ArrayCollection,e.addressList.dataProvider=e.ac,e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),GameController.getInstance().getAddressList()},e.prototype.initListener=function(){this.registerEvent(this.addAddressBtn,egret.TouchEvent.TOUCH_TAP,this.clickAdd,this),this.addRegister(NotifyConst.Notify_AddressList,this.onAddressList,this)},e.prototype.onAddressList=function(){this.ac.removeAll();var t=GameModel.getInstance().getAddressList();if(t&&t.list&&t.list.length>0)for(var e=0;e<t.list.length;e++)this.ac.addItem(t.list[e]);this.ac.refresh()},e.prototype.clickAdd=function(){console.log("新增地址"),UIManager.openUI(UIConst.AddAddressUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(AddressManageUI.prototype,"AddressManageUI");var ChargeUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/charge.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){console.log("init charge listener"),this.registerEvent(this.choice1,egret.TouchEvent.TOUCH_TAP,this.clickChoice1,this),this.registerEvent(this.choice2,egret.TouchEvent.TOUCH_TAP,this.clickChoice2,this),this.registerEvent(this.choice3,egret.TouchEvent.TOUCH_TAP,this.clickChoice3,this),this.registerEvent(this.inputMoney,egret.TouchEvent.TOUCH_TAP,this.changeInput,this),this.registerEvent(this.sureBtn,egret.TouchEvent.TOUCH_TAP,this.sure,this)},e.prototype.changeInput=function(){this.chargeNum=parseInt(this.inputMoney.text),this.choice1.source="chargeChoiceBg_png",this.choice2.source="chargeChoiceBg_png",this.choice3.source="chargeChoiceBg_png"},e.prototype.clickChoice1=function(){this.chargeNum=100,this.choice1.source="chargeChoiceBg_s_png",this.choice2.source="chargeChoiceBg_png",this.choice3.source="chargeChoiceBg_png"},e.prototype.clickChoice2=function(){this.chargeNum=300,this.choice1.source="chargeChoiceBg_png",this.choice2.source="chargeChoiceBg_s_png",this.choice3.source="chargeChoiceBg_png"},e.prototype.clickChoice3=function(){this.chargeNum=500,this.choice1.source="chargeChoiceBg_png",this.choice2.source="chargeChoiceBg_png",this.choice3.source="chargeChoiceBg_s_png"},e.prototype.sure=function(){console.log("确定充值 "+this.chargeNum)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(ChargeUI.prototype,"ChargeUI");var CoinDetailDescUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/coinDetailDesc.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(){UIManager.closeUI(UIConst.CoinDetailDescUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(CoinDetailDescUI.prototype,"CoinDetailDescUI");var CoinDetailItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/coinDetailItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){this.payType.text=this.data.type,this.payNumTxt.text=this.data.num,this.dateTxt.text=this.data.date},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(CoinDetailItem.prototype,"CoinDetailItem");var CoinDetailUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/coinDetail.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=new eui.ArrayCollection;e.addItem({type:"充值",num:2e3,date:"2017-09-30"}),e.addItem({type:"充值",num:502132132,date:"2017-08-31"}),e.addItem({type:"充值",num:50,date:"2017-07-02"}),e.addItem({type:"充值",num:20,date:"2017-09-30"}),e.addItem({type:"充值",num:800,date:"2017-09-30"}),e.addItem({type:"充值",num:6595,date:"2017-09-30"}),e.addItem({type:"充值",num:6595,date:"2017-09-30"}),e.addItem({type:"充值",num:6595,date:"2017-09-30"}),e.addItem({type:"充值",num:6595,date:"2017-09-30"}),this.coinDetailList.itemRenderer=CoinDetailItem,this.coinDetailList.useVirtualLayout=!1,this.coinDetailList.dataProvider=e,e.refresh()},e.prototype.initListener=function(){this.registerEvent(this.rightBtn,egret.TouchEvent.TOUCH_TAP,this.goContributeDetail,this),this.registerEvent(this.detailTxtIcon,egret.TouchEvent.TOUCH_TAP,this.goCoinDetailDesc,this),this.registerEvent(this.detailTxt,egret.TouchEvent.TOUCH_TAP,this.goCoinDetailDesc,this)},e.prototype.goContributeDetail=function(){UIManager.openUI(UIConst.ContributeDetailUI)},e.prototype.goCoinDetailDesc=function(){UIManager.openUI(UIConst.CoinDetailDescUI,LayerManager.Layer_Tip)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(CoinDetailUI.prototype,"CoinDetailUI");var ContributeDetailDescUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/contributeDetailDesc.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(){UIManager.closeUI(UIConst.ContributeDetailDescUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(ContributeDetailDescUI.prototype,"ContributeDetailDescUI");var ContriButeDetailItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/contributeDetailItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){this.addAttriTxt.text=this.data.num+"",this.dateTxt.text=this.data.date+""},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(ContriButeDetailItem.prototype,"ContriButeDetailItem");var ContributeDetailUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/contributeDetail.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=new eui.ArrayCollection;e.addItem({num:2e3,date:"2017-09-30"}),e.addItem({num:502132132,date:"2017-08-31"}),e.addItem({num:5,date:"2017-07-02"}),e.addItem({num:20,date:"2017-09-30"}),e.addItem({num:800,date:"2017-09-30"}),e.addItem({num:6595,date:"2017-09-30"}),e.addItem({num:20,date:"2017-09-30"}),e.addItem({num:800,date:"2017-09-30"}),e.addItem({num:6595,date:"2017-09-30"}),this.attriDetailList.itemRenderer=ContriButeDetailItem,this.attriDetailList.useVirtualLayout=!1,this.attriDetailList.dataProvider=e},e.prototype.initListener=function(){this.registerEvent(this.leftBtn,egret.TouchEvent.TOUCH_TAP,this.goCoinDetail,this),this.registerEvent(this.descIcon,egret.TouchEvent.TOUCH_TAP,this.goContriDetailDesc,this),this.registerEvent(this.detailTxt,egret.TouchEvent.TOUCH_TAP,this.goContriDetailDesc,this)},e.prototype.goCoinDetail=function(){UIManager.openUI(UIConst.CoinDetailUI)},e.prototype.goContriDetailDesc=function(){UIManager.openUI(UIConst.ContributeDetailDescUI,LayerManager.Layer_Tip)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(ContributeDetailUI.prototype,"ContributeDetailUI");var GiftItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/giftItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickItem,this)},e.prototype.dataChanged=function(){var t=this.data;this.txt1.text="邀请"+t.invitation+"个好友",this.txt2.text="可获得"+t.gold+"个果喵币",this.getAbleImg.visible=t.share?!1:!0},e.prototype.clickItem=function(){UIManager.openUI(UIConst.TipGetCoinUI,LayerManager.Layer_Tip)},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickItem,this)},e}(AItemRenderer);__reflect(GiftItem.prototype,"GiftItem");var GiftUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/gift.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.list.itemRenderer=GiftItem,this.list.useVirtualLayout=!1;var e=GameModel.getInstance().getGift(),n=new eui.ArrayCollection;for(var i in e){var o=e[i];n.addItem(o)}this.list.dataProvider=n},e.prototype.initListener=function(){this.registerEvent(this.btn_close,egret.TouchEvent.TOUCH_TAP,this.clickClose,this),this.registerEvent(this.leftBtn,egret.TouchEvent.TOUCH_TAP,this.clickleft,this),this.registerEvent(this.rightBtn,egret.TouchEvent.TOUCH_TAP,this.clickRight,this),this.registerEvent(this.inviteBtn,egret.TouchEvent.TOUCH_TAP,this.invite,this)},e.prototype.invite=function(){UIManager.openUI(UIConst.RankFriendContributeUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top),this.dispose()},e.prototype.getGift=function(){UIManager.openUI(UIConst.TipGetCoinUI,LayerManager.Layer_Tip)},e.prototype.clickleft=function(){this.scroller.viewport.scrollH-100>=0&&(this.scroller.viewport.scrollH-=100)},e.prototype.clickRight=function(){this.scroller.viewport.scrollH+100<this.scroller.viewport.contentWidth-502&&(this.scroller.viewport.scrollH+=100)},e.prototype.clickClose=function(){UIManager.closeUI(UIConst.GiftUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(GiftUI.prototype,"GiftUI");var HomeUI=function(t){function e(){var e=t.call(this)||this;return e.clickWaterCount=0,e.skinName="resource/skins/home.exml",e}return __extends(e,t),e.prototype.initSetting=function(){var e=this;t.prototype.initSetting.call(this),this.clickWaterCount=0,this.levelTxt.text="Lv"+GameModel.getInstance().getLevel(),this.noticeLabel.text="",this.noticeLabel.mask=this.noticeMask,this.noticeGroup.visible=!1,this.seedingImg.visible=!1,this.seedGroup.visible=!1,this.showNotice("这是一条测试公告这是一条测试公告一条测试公告"),setInterval(function(){e.showNotice("这是一条测试公告")},2e4),this.updateLand(1),GameModel.getInstance().isYesterdayRankGot||GameController.getInstance().getYesterdayHarvestRank(),GameController.getInstance().getFarmInfo(),GameController.getInstance().getAddressList(),GameController.getInstance().getStoreInfo(),GameController.getInstance().getHonorList(),this.intervalId=setInterval(function(){e.computeTime()},100)},e.prototype.showNotice=function(t){var e=this;this.noticeGroup.visible=!0,this.noticeLabel.text=t,this.noticeLabel.x=537,egret.callLater(function(){var t=e.noticeLabel.textWidth,n=15*(473+t);egret.Tween.get(e.noticeLabel).to({x:64-t},n).wait(1e3).call(function(){egret.Tween.removeTweens(e.noticeLabel),e.noticeGroup.visible=!1},e)},this)},e.prototype.initListener=function(){var t=this;this.registerEvent(this.headBg,egret.TouchEvent.TOUCH_TAP,this.clickHead,this),this.registerEvent(this.signBtn,egret.TouchEvent.TOUCH_TAP,this.clickSign,this),this.registerEvent(this.storeBtn,egret.TouchEvent.TOUCH_TAP,this.clickStore,this),this.registerEvent(this.btn_radio,egret.TouchEvent.TOUCH_TAP,this.clickRadio,this),this.registerEvent(this.btn_shop,egret.TouchEvent.TOUCH_TAP,this.clickShop,this),this.registerEvent(this.btn_charge,egret.TouchEvent.TOUCH_TAP,this.clickCharge,this),this.registerEvent(this.btn_rank,egret.TouchEvent.TOUCH_TAP,this.clickRank,this),this.registerEvent(this.btn_game,egret.TouchEvent.TOUCH_TAP,this.clickGame,this),this.registerEvent(this.btn_gift,egret.TouchEvent.TOUCH_TAP,this.clickGift,this),this.registerEvent(this.btn_weed,egret.TouchEvent.TOUCH_TAP,this.clickWeed,this),this.registerEvent(this.btn_fertilizer,egret.TouchEvent.TOUCH_TAP,this.clickFertilizer,this),this.registerEvent(this.btn_water,egret.TouchEvent.TOUCH_TAP,this.clickWater,this),this.registerEvent(this.btn_seed,egret.TouchEvent.TOUCH_TAP,this.clickSeed,this),this.registerEvent(this.tree1,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree2,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree3,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree4,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree5,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree6,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree7,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree8,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree9,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree10,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree11,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.tree12,egret.TouchEvent.TOUCH_TAP,this.clickTree,this),this.registerEvent(this.seedGroup,egret.TouchEvent.TOUCH_TAP,function(){t.seedGroup.visible=!1},this),this.registerEvent(this.seed1,egret.TouchEvent.TOUCH_TAP,this.clickSeedItem,this),this.registerEvent(this.seed2,egret.TouchEvent.TOUCH_TAP,this.clickSeedItem,this),this.addRegister(NotifyConst.Notify_LandInfo,this.onLandInfo,this),this.addRegister(NotifyConst.Notify_YesterdayHarvestRank,this.onYesterdayHarvestRank,this),this.addRegister(NotifyConst.Notify_SeedResult,this.onSeed,this),this.addRegister(NotifyConst.Notify_GatherResult,this.onGather,this),this.addRegister(NotifyConst.Notify_OperLandResult,this.onOper,this)},e.prototype.onYesterdayHarvestRank=function(t){console.log("主界面收到昨日排行 ",t),GameModel.getInstance().isYesterdayRankGot=!0,UIManager.openUI(UIConst.LastHarvestRankUI,LayerManager.Layer_Tip)},e.prototype.onLandInfo=function(t){if(t){var e=t.list[0];if(0==e.crop_id)this.updateLand(0);else{var n=GameModel.getInstance().getServerTime()-e.crop_start_time;n<GameModel.getInstance().getTreeYoungTime(e.crop_id)?this.updateLand(1):n<GameModel.getInstance().getTreeGrowTime(e.crop_id)?this.updateLand(2):n<GameModel.getInstance().getTreeRipeTime(e.crop_id)?this.updateLand(3):this.updateLand(4)}}},e.prototype.updateLand=function(t){for(var e=1;12>=e;e++)0==t?this["tree"+e].source="":1==t?this["tree"+e].source="tree_seed_png":2==t?this["tree"+e].source="tree_young_png":3==t?this["tree"+e].source="tree_grow_png":4==t&&(this["tree"+e].source="tree_ripe_png")},e.prototype.showSeeding=function(){var t=this;this.seedingImg.visible=!0,this.seedingImg.alpha=1,this.seedingImg.scaleX=1,this.seedingImg.scaleY=1,egret.Tween.get(this.seedingImg).to({scaleX:1.2,scaleY:1.2,alpha:.5},500).to({alpha:.01},500).call(function(){t.seedingImg.visible=!1,t.seedingImg.alpha=1,t.seedingImg.scaleX=1,t.seedingImg.scaleY=1},this)},e.prototype.clickHead=function(){UIManager.openUI(UIConst.UserMenuUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top)},e.prototype.clickSign=function(){UIManager.openUI(UIConst.SignUI,LayerManager.Layer_Tip)},e.prototype.clickStore=function(){UIManager.openUI(UIConst.StoreUI,LayerManager.Layer_Tip)},e.prototype.clickRadio=function(){UIManager.openUI(UIConst.RadioUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top)},e.prototype.clickShop=function(){UIManager.openUI(UIConst.ShopUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top)},e.prototype.clickCharge=function(){UIManager.openUI(UIConst.ChargeUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top)},e.prototype.clickRank=function(){UIManager.openUI(UIConst.RankFriendContributeUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top)},e.prototype.clickGame=function(){},e.prototype.clickGift=function(){UIManager.openUI(UIConst.GiftUI,LayerManager.Layer_Tip)},e.prototype.clickWeed=function(){GameController.getInstance().sendOperLand(5)},e.prototype.clickFertilizer=function(){GameController.getInstance().sendOperLand(6)},e.prototype.clickWater=function(){0==this.clickWaterCount?GameController.getInstance().sendOperLand(3):UIManager.openUI(UIConst.InviteWaterUI,LayerManager.Layer_Tip),this.clickWaterCount++},e.prototype.onOper=function(t){console.log("播种 浇水 施肥 返回 ",t),0==t.status},e.prototype.clickSeed=function(){this.seedGroup.visible=!0},e.prototype.clickSeedItem=function(){this.seedGroup.visible=!1;var t=GameModel.getInstance().getSeedId();GameController.getInstance().sendSeed(t),this.showSeeding()},e.prototype.onSeed=function(){GameController.getInstance().getFarmInfo()},e.prototype.clickTree=function(){var t=GameModel.getInstance().getLandInfo();if(t&&t.list){var e=t.list[0],n=GameModel.getInstance().getServerTime()-e.crop_start_time;e.is_ripe||n>=GameModel.getInstance().getTreeRipeTime(e.crop_id)?GameController.getInstance().sendGather():console.log("还不能收割")}},e.prototype.onGather=function(t){if(console.log("收割返回 ",t),0==t.status){var e=t.data.count,n=t.data.item_id,i=GameModel.getInstance().getItemById(parseInt(n));NotifyManager.getInstance().sendNotify(NotifyConst.Notify_Green,e+" "+i.name),GameController.getInstance().getFarmInfo()}},e.prototype.computeTime=function(){var t=GameModel.getInstance().getLandInfo();this.onLandInfo(t)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this),clearInterval(this.intervalId)},e}(BaseUI);__reflect(HomeUI.prototype,"HomeUI");var InviteDetailUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/inviteWaterDetail.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){this.registerEvent(this.leftBtn,egret.TouchEvent.TOUCH_TAP,this.onclose,this)},e.prototype.onclose=function(){UIManager.openUI(UIConst.HomeUI),this.dispose()},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(InviteDetailUI.prototype,"InviteDetailUI");var InviteWaterItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/inviteWaterItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickInvite,this)},e.prototype.dataChanged=function(){},e.prototype.clickInvite=function(){UIManager.closeUI(UIConst.InviteWaterUI),UIManager.openUI(UIConst.InviteDetailUI)},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickInvite,this)},e}(AItemRenderer);__reflect(InviteWaterItem.prototype,"InviteWaterItem");var InviteWaterUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/inviteWater.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.list.itemRenderer=InviteWaterItem;var e=new eui.ArrayCollection;e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),this.list.dataProvider=e},e.prototype.initListener=function(){this.registerEvent(this.btn_close,egret.TouchEvent.TOUCH_TAP,this.clickClose,this),this.registerEvent(this.inviteFriends,egret.TouchEvent.TOUCH_TAP,this.clickInviteFriends,this),this.registerEvent(this.inviteWxFriends,egret.TouchEvent.TOUCH_TAP,this.clickInviteWxFriends,this)},e.prototype.clickInviteFriends=function(){UIManager.closeUI(UIConst.InviteWaterUI),UIManager.openUI(UIConst.RankFriendContributeUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top)},e.prototype.clickInviteWxFriends=function(){},e.prototype.clickClose=function(){UIManager.closeUI(UIConst.InviteWaterUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(InviteWaterUI.prototype,"InviteWaterUI");var HonorDetailUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/honorDetail.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=GameModel.getInstance().getHonorItemDetail();this.nameTxt.text=e.name,this.timeTxt.text=e.name,this.countTxt.text=e.complete,this.descTxt.text=e.content},e.prototype.initListener=function(){this.registerEvent(this.setSDefaultBtn,egret.TouchEvent.TOUCH_TAP,this.setDefault,this),this.registerEvent(this.shareBtn,egret.TouchEvent.TOUCH_TAP,this.share,this)},e.prototype.setDefault=function(){var t=GameModel.getInstance().getHonorItemDetail();GameController.getInstance().getHonorReward(t.id)},e.prototype.share=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(HonorDetailUI.prototype,"HonorDetailUI");var HonorItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/honorItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.dataChanged=function(){var t=this.data.itemdata,e=this.data.isAchieved;this.icon.source=e?"honor1_png":"honor4_cannotGet_png",this.txt.text=t.name},e.prototype.click=function(){GameModel.getInstance().currentHonorItem=this.data.itemdata,UIManager.openUI(UIConst.HonorDetailUI)},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e}(AItemRenderer);__reflect(HonorItem.prototype,"HonorItem");var HonorWallUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/honorWall.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.list.itemRenderer=HonorItem,this.list.useVirtualLayout=!1;var e=GameModel.getInstance().getHonorInfo(),n=GameModel.getInstance().getHonorConfig(),i=new eui.ArrayCollection;console.log("徽章达成信息：",e);for(var o in n){var r=!1;if(e&&e.list)for(var s=0;s<e.list.length;s++)e.list[s].config_id==o&&(r=!0);i.addItem({itemdata:n[o],isAchieved:r})}this.list.dataProvider=i},e.prototype.initListener=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(HonorWallUI.prototype,"HonorWallUI");var LastActivityItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/lastActivityItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(LastActivityItem.prototype,"LastActivityItem");var LastActivityUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/lastActivity.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.list.itemRenderer=LastActivityItem;var e=new eui.ArrayCollection;e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),this.list.dataProvider=e},e.prototype.initListener=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(LastActivityUI.prototype,"LastActivityUI");var LastHarvestRankItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/lastHarvestItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.detailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goDetail,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addFriend,this)},e.prototype.goDetail=function(){UIManager.openUI(UIConst.ContributeDetailUI),UIManager.openUI(UIConst.TopBarUI,LayerManager.Layer_Top),UIManager.closeUI(UIConst.LastHarvestRankUI)},e.prototype.addFriend=function(){var t=this.data.data;GameController.getInstance().addFriend(t.user_id),UIManager.openUI(UIConst.TipAddFriendUI,LayerManager.Layer_Tip)},e.prototype.dataChanged=function(){var t=this.data.data;this.data.isSelf?(this.addBtn.visible=!1,this.detailBtn.visible=!0,this.bg.source="myCoinRankBg_png"):(this.addBtn.visible=!0,this.detailBtn.visible=!1,this.bg.source="chargeChoiceBg_png"),this.nameTxt.text=t.nickname,this.moneyTxt.text=t.last_gold+"",t.index<=3?(this.rankIcon.source="rank"+t.index+"_png",this.otherRankNumTxt.text=""):(this.rankIcon.source="rankbg_png",this.otherRankNumTxt.text=t.index+"")},e.prototype.onRemove=function(){this.detailBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.goDetail,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addFriend,this)},e}(AItemRenderer);__reflect(LastHarvestRankItem.prototype,"LastHarvestRankItem");var LastHarvestRankUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/lastHarvestRank.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.list.itemRenderer=LastHarvestRankItem,this.list.useVirtualLayout=!1;var e=GameModel.getInstance().getYesterdayRank(),n=new eui.ArrayCollection;if(e&&e.self&&n.addItem({data:e.self,isSelf:!0}),e&&e.list&&e.list.length>0)for(var i=0;i<e.list.length;i++)n.addItem({data:e.list[i],isSelf:!1});this.list.dataProvider=n},e.prototype.initListener=function(){this.registerEvent(this.btn_close,egret.TouchEvent.TOUCH_TAP,this.clickClose,this)},e.prototype.clickClose=function(){UIManager.closeUI(UIConst.LastHarvestRankUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(LastHarvestRankUI.prototype,"LastHarvestRankUI");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.index=0,e.skinName="resource/skins/loadingSkin.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),UIManager.openUI(UIConst.TipErrorUI,LayerManager.Layer_Sys),UIManager.openUI(UIConst.TipGreenUI,LayerManager.Layer_Sys),GameController.getInstance().getUserInfo(window.params),GameController.getInstance().getServerConfig(),this.load()},e.prototype.initListener=function(){this.registerEvent(this,egret.Event.ENTER_FRAME,this.onframe,this),this.addRegister(NotifyConst.Notify_UserInfo,this.onUserInfo,this)},e.prototype.load=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),UIManager.openUI(UIConst.WelcomeUI))},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.setProgress(t.itemsLoaded/t.itemsTotal)},e.prototype.onUserInfo=function(t){console.log("收到了用户信息 ",t)},e.prototype.setProgress=function(t){this.bar.width=898*t,this.txt.text=Math.ceil(100*t)+"%"},e.prototype.onframe=function(){this.index++,this.index>=10&&(this.index=0),this.mc.source="loading"+(Math.floor(this.index/2)+1)+"_png"},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(LoadingUI.prototype,"LoadingUI");var MyOrderListItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/myOrderItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.payBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pay,this),this.lookBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.look,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sure,this),this.deleteOrderBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this["delete"],this)},e.prototype.dataChanged=function(){var t=this,e=this.data.itemData,n=this.data.status,i=new Date;i.setMilliseconds(e.created_at),this.timeTxt.text=i.getFullYear()+"-"+i.getMonth()+"-"+i.getDate(),this.totalCountTxt.text="共"+e.list.length+"件商品",this.totalCostTxt.text="￥"+e.price,0==n&&(this.timeTxt.visible=!1,this.payBtn.visible=!0,this.lookBtn.visible=!1,this.sureBtn.visible=!1,this.deleteOrderBtn.visible=!1,this.totalCostTipTxt.text="需付款:"),1==n&&(this.timeTxt.visible=!1,this.payBtn.visible=!1,this.lookBtn.visible=!0,this.sureBtn.visible=!0,this.deleteOrderBtn.visible=!1,this.totalCostTipTxt.text="需付款:"),2==n&&(this.timeTxt.visible=!0,this.payBtn.visible=!1,this.lookBtn.visible=!1,this.sureBtn.visible=!1,this.deleteOrderBtn.visible=!0,this.totalCostTipTxt.text="共计:");for(var o=new eui.ArrayCollection,r=e.list,s=0;s<r.length;s++)o.addItem(r[s]);this.oneOrderList.itemRenderer=MyOrderListOneItem,this.oneOrderList.useVirtualLayout=!1,this.oneOrderList.dataProvider=o,egret.callLater(function(){t.bottomGroup.y=t.oneOrderList.y+t.oneOrderList.height,t.rect.height=t.bottomGroup.y+t.bottomGroup.height,t.height=t.rect.height+10},this)},e.prototype.pay=function(){var t=this.data.itemData;GameController.getInstance().sendOrderPay(t.id)},e.prototype.look=function(){},e.prototype.sure=function(){var t=this.data.itemData;GameController.getInstance().sendSureReceive(t.id)},e.prototype["delete"]=function(){var t=this.data.itemData;GameController.getInstance().sendDeleteReceivedOrder(t.id)},e.prototype.onRemove=function(){this.payBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pay,this),this.lookBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.look,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.sure,this),this.deleteOrderBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this["delete"],this)},e}(AItemRenderer);__reflect(MyOrderListItem.prototype,"MyOrderListItem");var MyOrderListOneItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/myOrderOneItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){var t=this.data;this.nameTxt.text=t.name,this.costTxt.text="￥"+t.gold,this.countTxt.text=t.num+""},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(MyOrderListOneItem.prototype,"MyOrderListOneItem");var MyOrderUI=function(t){function e(){var e=t.call(this)||this;return e.curChoose=0,e.skinName="resource/skins/myOrder.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.choose0()},e.prototype.initListener=function(){this.registerEvent(this.tabImg0,egret.TouchEvent.TOUCH_TAP,this.choose0,this),this.registerEvent(this.tabImg1,egret.TouchEvent.TOUCH_TAP,this.choose1,this),this.registerEvent(this.tabImg2,egret.TouchEvent.TOUCH_TAP,this.choose2,this),this.addRegister(NotifyConst.Notify_OrderList,this.onOrderList,this),this.addRegister(NotifyConst.Notify_OrderPayResult,this.onPay,this),this.addRegister(NotifyConst.Notify_SureReceiveResult,this.onSure,this),this.addRegister(NotifyConst.Notify_DeleteReceivedOrderResult,this.onDelete,this)},e.prototype.choose0=function(){this.curChoose=0,this.tabImg0.source="rank_tab_select_png",this.tabImg1.source="rank_tab_noselect_png",this.tabImg2.source="rank_tab_noselect_png",GameController.getInstance().getOrderList(this.curChoose,0,10)},e.prototype.choose1=function(){this.curChoose=1,this.tabImg0.source="rank_tab_noselect_png",this.tabImg1.source="rank_tab_select_png",this.tabImg2.source="rank_tab_noselect_png",GameController.getInstance().getOrderList(this.curChoose,0,10)},e.prototype.choose2=function(){this.curChoose=2,this.tabImg0.source="rank_tab_noselect_png",this.tabImg1.source="rank_tab_noselect_png",this.tabImg2.source="rank_tab_select_png",GameController.getInstance().getOrderList(this.curChoose,0,10)},e.prototype.onOrderList=function(t){if(console.log("订单信息 ",t),this.ac=new eui.ArrayCollection,this.list.itemRenderer=MyOrderListItem,this.list.useVirtualLayout=!1,t&&t.list&&t.list.length>0)for(var e=t.list,n=0;n<e.length;n++)this.ac.addItem({itemData:e[n],status:e[n].status});
this.list.dataProvider=this.ac},e.prototype.onPay=function(){this.choose0()},e.prototype.onSure=function(){this.choose1()},e.prototype.onDelete=function(){this.choose2()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(MyOrderUI.prototype,"MyOrderUI");var OtherLandUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/otherLand.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(OtherLandUI.prototype,"OtherLandUI");var OtherUserDetailUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/OtherUserDetail.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=GameModel.getInstance().getCurOtherUser();this.nameTxt.text=e.nickname,this.LevelTxtImg.source="num"+e.nickname+"_png",this.gameIdTxt.text="游戏ID: "+e.id,this.timesTxt.text="参与次数:0期",this.friendCountTxt.text="拥有好友:0人",this.thmTxt.text="获得赞数:"+e.thumbs_up+"个",this.honorTxt.text="上榜次数:0次",this.honorList.itemRenderer=OtherUserHonorItem,this.honorList.useVirtualLayout=!1;var n=new eui.ArrayCollection;n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),this.honorList.dataProvider=n},e.prototype.initListener=function(){this.registerEvent(this.addBtn,egret.TouchEvent.TOUCH_TAP,this.addFriend,this)},e.prototype.addFriend=function(){UIManager.openUI(UIConst.TipAddFriendUI,LayerManager.Layer_Tip)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(OtherUserDetailUI.prototype,"OtherUserDetailUI");var OtherUserHonorItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/OtherUserHonorItemSkin.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(OtherUserHonorItem.prototype,"OtherUserHonorItem");var TipAddFriendUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/tipAddFriend.exml",e}return __extends(e,t),e.prototype.initSetting=function(){var e=this;t.prototype.initSetting.call(this),setTimeout(function(){e.dispose()},1e3)},e.prototype.initListener=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(TipAddFriendUI.prototype,"TipAddFriendUI");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),LayerManager.getInstance().initLayer(this),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"loading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName},e.prototype.startCreateScene=function(){UIManager.openUI(UIConst.LoadingUI)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var PayUI=function(t){function e(){var e=t.call(this)||this;return e.sendPayData=[],e.skinName="resource/skins/pay.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=GameModel.getInstance().getDefaultAddress();e?(this.addressNameTxt.text=e.realname,this.addressNumTxt.text=e.phone,this.addressDetailTxt.text=e.address):(this.addressNameTxt.text="您还没有添加地址",this.addressNumTxt.text="",this.addressDetailTxt.text="");var n=GameModel.getInstance().getShopCarData(),i=new eui.ArrayCollection;this.sendPayData=[];for(var o in n){var r=GameModel.getInstance().getItemById(parseInt(o));i.addItem({itemdata:r,count:n[o]}),this.sendPayData.push({item_id:o,num:n[o]})}this.buyList.itemRenderer=PayGoodsItem,this.buyList.dataProvider=i,this.updateHeight()},e.prototype.initListener=function(){this.registerEvent(this.payBtn,egret.TouchEvent.TOUCH_TAP,this.clickPay,this),this.registerEvent(this.moreAddressBtn,egret.TouchEvent.TOUCH_TAP,this.clickMoreAddress,this),this.addRegister(NotifyConst.Notify_OrderResult,this.onPay,this)},e.prototype.updateHeight=function(){var t=this;egret.callLater(function(){t.buyListGroup.height=t.buyList.height+35,t.payTypeGroup.y=t.buyListGroup.y+t.buyListGroup.height+10,t.leaveMsgGroup.y=t.payTypeGroup.y+t.payTypeGroup.height+10,t.scrollerGroup.height=t.leaveMsgGroup.y+t.leaveMsgGroup.height},this)},e.prototype.clickMoreAddress=function(){UIManager.openUI(UIConst.AddressManageUI,LayerManager.Layer_UI)},e.prototype.clickPay=function(){var t=GameModel.getInstance().getDefaultAddress(),e=t?t.id:0;GameController.getInstance().sendOrder(e,this.sendPayData,this.leaveMsgInput.text)},e.prototype.onPay=function(t){t.status>0||(GameModel.getInstance().clearShopCar(),UIManager.openUI(UIConst.MyOrderUI))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(PayUI.prototype,"PayUI");var LeaveMsgItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/leaveMsgsItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(LeaveMsgItem.prototype,"LeaveMsgItem");var LeaveMsgUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/leaveMsgs.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.list.useVirtualLayout=!1,this.list.itemRenderer=LeaveMsgItem;var e=new eui.ArrayCollection;e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),e.addItem({}),this.list.dataProvider=e},e.prototype.initListener=function(){this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(LeaveMsgUI.prototype,"LeaveMsgUI");var RadioItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/radioItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOK,this),this.detailBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickDetail,this)},e.prototype.dataChanged=function(){this.data&&(this.time.text=this.data.time,this.content.text=this.data.content,"system"==this.data.type?(this.bg.source="sysMsgBg_png",this.title.text="系统广播",this.okBtn.visible=!0,this.detailBtn.visible=!1,this.newMsgIcon.visible=!0):"weather"==this.data.type?(this.bg.source="weatherBg_png",this.title.text="气象预警",this.okBtn.visible=!0,this.detailBtn.visible=!1,this.newMsgIcon.visible=!1):"report"==this.data.type?(this.bg.source="reportBg_png",this.title.text="盈亏报告",this.okBtn.visible=!1,this.detailBtn.visible=!0,this.newMsgIcon.visible=!1):"leaveMsg"==this.data.type&&(this.bg.source="chatMsgBg_png",this.title.text="好友留言",this.okBtn.visible=!1,this.detailBtn.visible=!0,this.newMsgIcon.visible=!1))},e.prototype.clickOK=function(){},e.prototype.clickDetail=function(){"report"==this.data.type?UIManager.openUI(UIConst.ContributeDetailUI):"leaveMsg"==this.data.type&&UIManager.openUI(UIConst.LeaveMsgUI,LayerManager.Layer_Tip)},e.prototype.onRemove=function(){this.okBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOK,this),this.detailBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickDetail,this)},e}(AItemRenderer);__reflect(RadioItem.prototype,"RadioItem");var RadioRecordItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/radioRecordItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(RadioRecordItem.prototype,"RadioRecordItem");var RadioUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/radio.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.clickRadio(),this.list.itemRenderer=RadioItem,this.list.useVirtualLayout=!1;var e=new eui.ArrayCollection;Math.random()>.5?(this.noRadioGroup.visible=!1,this.radioScroller.visible=!0,e.addItem({type:"system",content:"由于果农急速增长，我们将对服务器进行升级，以容纳更多果农，11月12日凌晨3点到5点将暂时关闭农场，请广大果农体谅。",time:"2017-09-15"}),e.addItem({type:"weather",content:"果瞄气象台预告，新一轮的雨水天气将对水果的产量产生影响，请各位果农使用保险卡以免除灾害带来的损失",time:"2017-09-15"}),e.addItem({type:"report",content:"勤劳的果农，由于您的辛勤看护，您盈利12果瞄币，再接再厉哦！",time:"2017-09-15"}),e.addItem({type:"leaveMsg",content:"留言人：木蚂蚁 \n看好你的水果，明天我又来偷，哈哈哈哈哈",time:"2017-09-15"})):(this.noRadioGroup.visible=!0,this.radioScroller.visible=!1),this.list.dataProvider=e,this.recordList.itemRenderer=RadioRecordItem,this.recordList.useVirtualLayout=!1;var n=new eui.ArrayCollection;n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),n.addItem({}),this.recordList.dataProvider=n},e.prototype.initListener=function(){this.registerEvent(this.radioBtn,egret.TouchEvent.TOUCH_TAP,this.clickRadio,this),this.registerEvent(this.recordBtn,egret.TouchEvent.TOUCH_TAP,this.clickRecord,this)},e.prototype.clickRadio=function(){console.log("radio"),this.radioGroup.visible=!0,this.recordGroup.visible=!1,this.radioBtn.source="rank_tab_select_png",this.recordBtn.source="rank_tab_noselect_png"},e.prototype.clickRecord=function(){console.log("record"),this.radioGroup.visible=!1,this.recordGroup.visible=!0,this.radioBtn.source="rank_tab_noselect_png",this.recordBtn.source="rank_tab_select_png"},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(RadioUI.prototype,"RadioUI");var AddFriendUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/addFriend.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.ac=new eui.ArrayCollection,this.list.itemRenderer=SearchUserItem,this.list.useVirtualLayout=!1,this.list.dataProvider=this.ac},e.prototype.initListener=function(){this.registerEvent(this.searchBtn,egret.TouchEvent.TOUCH_TAP,this.search,this),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.addRegister(NotifyConst.Notify_FindUser,this.onSearch,this)},e.prototype.search=function(){var t=this.input.text;GameController.getInstance().findUser(t)},e.prototype.onSearch=function(t){if(console.log("search ",t),this.ac.removeAll(),t&&t.list&&t.list.length>0)for(var e=0;e<t.list.length;e++)this.ac.addItem(t.list[e]);this.ac.refresh()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(AddFriendUI.prototype,"AddFriendUI");var FriendRequestsItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/friendRequestsItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.agreeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickAgree,this),this.refuseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickRefuse,this)},e.prototype.dataChanged=function(){var t=this,e=this.data;this.nameTxt.text=e.nickname,this.lvNumImg.source="num"+e.level+"_png",egret.callLater(function(){t.lvGroup.x=t.nameTxt.x+t.nameTxt.width+10},this)},e.prototype.clickAgree=function(){var t=this.data;GameController.getInstance().agreeOrRefuseAddFriend(t.user_id,1)},e.prototype.clickRefuse=function(){var t=this.data;GameController.getInstance().agreeOrRefuseAddFriend(t.user_id,0)},e.prototype.onRemove=function(){this.agreeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickAgree,this),this.refuseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickRefuse,this)},e}(AItemRenderer);__reflect(FriendRequestsItem.prototype,"FriendRequestsItem");var FriendRequestsUI=function(t){function e(){var e=t.call(this)||this;return e.user_ids=[],e.skinName="resource/skins/friendRequests.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.ac=new eui.ArrayCollection,this.list.itemRenderer=FriendRequestsItem,this.list.useVirtualLayout=!1,this.list.dataProvider=this.ac,GameController.getInstance().getFriendRespondList()},e.prototype.initListener=function(){this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.dispose,this),this.registerEvent(this.onekeyAgree,egret.TouchEvent.TOUCH_TAP,this.agreeAll,this),this.registerEvent(this.onekeyRefuse,egret.TouchEvent.TOUCH_TAP,this.refuseAll,this),this.addRegister(NotifyConst.Notify_FriendRespondList,this.onList,this)},e.prototype.agreeAll=function(){GameController.getInstance().respondAddFriendList(this.user_ids,1)},e.prototype.refuseAll=function(){GameController.getInstance().respondAddFriendList(this.user_ids,0)},e.prototype.onList=function(t){if(console.log("需要回复的列表 ",t),this.ac.removeAll(),this.user_ids=[],t&&t.list&&t.list.length>0)for(var e=0;e<t.list.length;e++)this.ac.addItem(t.list[e]),this.user_ids.push(parseInt(t.list[e].user_id));this.ac.refresh()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(FriendRequestsUI.prototype,"FriendRequestsUI");var RankAllCoinUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank_all_coin.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=GameModel.getInstance().getUserInfo();this.myHeadIcon.source=e.avatar,this.myNameTxt.text=e.nickname,this.myChangeTxt.text=e.gold+"",this.ac=new eui.ArrayCollection,this.list.itemRenderer=RankItem_All_coin,this.list.useVirtualLayout=!1,this.list.dataProvider=this.ac,GameController.getInstance().getRankList(0,10,0),GameController.getInstance().getMyRankInAll(1)},e.prototype.initListener=function(){this.registerEvent(this.byCoin,egret.TouchEvent.TOUCH_TAP,this.clickByContri,this),this.registerEvent(this.friendRank,egret.TouchEvent.TOUCH_TAP,this.clickFriendRank,this),this.registerEvent(this.addFriendBtn,egret.TouchEvent.TOUCH_TAP,this.clickAddFriend,this),this.registerEvent(this.friendRequestBtn,egret.TouchEvent.TOUCH_TAP,this.clickFriendRequests,this),this.addRegister(NotifyConst.Notify_RankList,this.onList,this),this.addRegister(NotifyConst.Notify_MyRankInAll,this.onMyRank,this)},e.prototype.clickByContri=function(){UIManager.openUI(UIConst.RankAllContributeUI)},e.prototype.clickFriendRank=function(){UIManager.openUI(UIConst.RankFriendContributeUI)},e.prototype.clickAddFriend=function(){UIManager.openUI(UIConst.AddFriendUI,LayerManager.Layer_Tip)},e.prototype.clickFriendRequests=function(){UIManager.openUI(UIConst.FriendRequestsUI,LayerManager.Layer_Tip)},e.prototype.onMyRank=function(t){console.log("我在全部人中的排行 ",t)},e.prototype.onList=function(t){if(console.log("全部排行 ",t),this.ac.removeAll(),t&&t.list&&t.list.length>0)for(var e=t.list,n=0;n<e.length;n++)this.ac.addItem(e[n]);this.ac.refresh()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(RankAllCoinUI.prototype,"RankAllCoinUI");var RankAllContributeUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank_all_contri.exml",e}return __extends(e,t),e.prototype.initSetting=function(){var e=this;t.prototype.initSetting.call(this);var n=GameModel.getInstance().getUserInfo();this.myHeadIcon.source=n.avatar,this.myNameTxt.text=n.nickname,this.myLevelNum.source="num"+n.level+"_png",this.myChangeTxt.text=n.exp+"",egret.callLater(function(){e.lvBg.x=e.myNameTxt.x+e.myNameTxt.width+2,e.lv.x=e.lvBg.x+10,e.myLevelNum.x=e.lvBg.x+35},this),this.ac=new eui.ArrayCollection,this.list.itemRenderer=RankItem_All_contri,this.list.useVirtualLayout=!1,this.list.dataProvider=this.ac,GameController.getInstance().getRankList(0,10,0),GameController.getInstance().getMyRankInAll(0)},e.prototype.initListener=function(){this.registerEvent(this.byCoin,egret.TouchEvent.TOUCH_TAP,this.clickByCoin,this),this.registerEvent(this.friendRank,egret.TouchEvent.TOUCH_TAP,this.clickFriendRank,this),this.registerEvent(this.addFriendBtn,egret.TouchEvent.TOUCH_TAP,this.clickAddFriend,this),this.registerEvent(this.friendRequestBtn,egret.TouchEvent.TOUCH_TAP,this.clickFriendRequests,this),this.addRegister(NotifyConst.Notify_RankList,this.onList,this),this.addRegister(NotifyConst.Notify_MyRankInAll,this.onMyRank,this)},e.prototype.clickByCoin=function(){UIManager.openUI(UIConst.RankAllCoinUI)},e.prototype.clickFriendRank=function(){UIManager.openUI(UIConst.RankFriendContributeUI)},e.prototype.clickAddFriend=function(){UIManager.openUI(UIConst.AddFriendUI,LayerManager.Layer_Tip)},e.prototype.clickFriendRequests=function(){UIManager.openUI(UIConst.FriendRequestsUI,LayerManager.Layer_Tip)},e.prototype.onMyRank=function(t){console.log("我在全部人中的排行 ",t)},e.prototype.onList=function(t){if(console.log("全部排行 ",t),this.ac.removeAll(),t&&t.list&&t.list.length>0)for(var e=t.list,n=0;n<e.length;n++)this.ac.addItem(e[n]);this.ac.refresh()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(RankAllContributeUI.prototype,"RankAllContributeUI");var RankFriendCoinUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank_friend_coin.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=GameModel.getInstance().getUserInfo();this.myHeadIcon.source=e.avatar,this.myNameTxt.text=e.nickname,this.myChangeTxt.text=e.gold+"",this.ac=new eui.ArrayCollection,this.list.itemRenderer=RankItem_Friend_coin,this.list.useVirtualLayout=!1,this.list.dataProvider=this.ac,GameController.getInstance().getFriendList(0,10,0),GameController.getInstance().getMyRankInFriends(1)},e.prototype.initListener=function(){this.registerEvent(this.allRank,egret.TouchEvent.TOUCH_TAP,this.clickAllRank,this),this.registerEvent(this.byCoin,egret.TouchEvent.TOUCH_TAP,this.clickByContri,this),this.registerEvent(this.addFriendBtn,egret.TouchEvent.TOUCH_TAP,this.clickAddFriend,this),this.registerEvent(this.friendRequestBtn,egret.TouchEvent.TOUCH_TAP,this.clickFriendRequests,this),this.addRegister(NotifyConst.Notify_FriendList,this.onList,this),this.addRegister(NotifyConst.Notify_MyRankInFriends,this.onMyRank,this)},e.prototype.clickAllRank=function(){UIManager.openUI(UIConst.RankAllCoinUI)},e.prototype.clickByContri=function(){UIManager.openUI(UIConst.RankFriendContributeUI)},e.prototype.clickAddFriend=function(){UIManager.openUI(UIConst.AddFriendUI,LayerManager.Layer_Tip)},e.prototype.clickFriendRequests=function(){UIManager.openUI(UIConst.FriendRequestsUI,LayerManager.Layer_Tip)},e.prototype.onMyRank=function(t){console.log("我在全部人中的排行 ",t)},e.prototype.onList=function(t){if(console.log("收到好友列表 ",t),this.ac.removeAll(),t&&t.list&&t.list.length>0)for(var e=0;e<t.list.length;e++)this.ac.addItem(t.list[e]);this.ac.refresh()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(RankFriendCoinUI.prototype,"RankFriendCoinUI");var RankFriendContributeUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rank_friend_contri.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this);var e=GameModel.getInstance().getUserInfo();this.myHeadIcon.source=e.avatar,this.myNameTxt.text=e.nickname,this.myChangeTxt.text=e.exp+"",this.ac=new eui.ArrayCollection,this.list.itemRenderer=RankItem_Friend_contri,this.list.useVirtualLayout=!1,this.list.dataProvider=this.ac,GameController.getInstance().getFriendList(0,10,0),GameController.getInstance().getMyRankInFriends(0)},e.prototype.initListener=function(){this.registerEvent(this.allRank,egret.TouchEvent.TOUCH_TAP,this.clickAllRank,this),this.registerEvent(this.byCoin,egret.TouchEvent.TOUCH_TAP,this.clickByCoin,this),this.registerEvent(this.addFriendBtn,egret.TouchEvent.TOUCH_TAP,this.clickAddFriend,this),this.registerEvent(this.friendRequestBtn,egret.TouchEvent.TOUCH_TAP,this.clickFriendRequests,this),this.addRegister(NotifyConst.Notify_FriendList,this.onList,this),this.addRegister(NotifyConst.Notify_MyRankInFriends,this.onMyRank,this)},e.prototype.clickAllRank=function(){UIManager.openUI(UIConst.RankAllContributeUI)},e.prototype.clickByCoin=function(){UIManager.openUI(UIConst.RankFriendCoinUI)},e.prototype.clickAddFriend=function(){UIManager.openUI(UIConst.AddFriendUI,LayerManager.Layer_Tip)},e.prototype.clickFriendRequests=function(){UIManager.openUI(UIConst.FriendRequestsUI,LayerManager.Layer_Tip)},e.prototype.onMyRank=function(t){console.log("我在全部人中的排行 ",t)},e.prototype.onList=function(t){if(console.log("收到好友列表 ",t),this.ac.removeAll(),t&&t.list&&t.list.length>0)for(var e=0;e<t.list.length;e++)this.ac.addItem(t.list[e]);this.ac.refresh()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(RankFriendContributeUI.prototype,"RankFriendContributeUI");var RankItem_All_coin=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rankItem_all_coin.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.dataChanged=function(){var t=this.data;this.myRankNum.text=t.index,this.nameTxt.text=t.nickname,this.myChangeTxt.text=t.exp,this.myHeadIcon.source=t.avatar,Math.random()<.5?(this.handAbleImg.visible=!0,this.waterAbleImg.visible=!1):(this.handAbleImg.visible=!1,this.waterAbleImg.visible=!0)},e.prototype.click=function(t){var e=this.data;t.target==this.addBtn?(console.log("加他"),GameController.getInstance().addFriend(parseInt(e.id)),UIManager.openUI(UIConst.TipAddFriendUI,LayerManager.Layer_Tip)):t.target==this.handAbleImg?(console.log("去偷菜"),UIManager.openUI(UIConst.OtherLandUI)):t.target==this.waterAbleImg?(console.log("去浇水"),UIManager.openUI(UIConst.OtherLandUI)):(console.log("查看资料"),GameModel.getInstance().curOtherUser=this.data,UIManager.openUI(UIConst.OtherUserDetailUI))},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e}(AItemRenderer);__reflect(RankItem_All_coin.prototype,"RankItem_All_coin");var RankItem_All_contri=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rankItem_all_contri.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.dataChanged=function(){var t=this,e=this.data;this.myRankNum.text=e.index,this.nameTxt.text=e.nickname,this.myLevelNum.source="num"+e.level+"_png",this.myChangeTxt.text=e.exp,this.myHeadIcon.source=e.avatar,Math.random()<.5?(this.handAbleImg.visible=!0,this.waterAbleImg.visible=!1):(this.handAbleImg.visible=!1,this.waterAbleImg.visible=!0),egret.callLater(function(){t.lvGroup.x=t.nameTxt.x+t.nameTxt.width+10},this)},e.prototype.click=function(t){var e=this.data;t.target==this.addBtn?(console.log("加他"),GameController.getInstance().addFriend(parseInt(e.id)),UIManager.openUI(UIConst.TipAddFriendUI,LayerManager.Layer_Tip)):t.target==this.handAbleImg?(console.log("去偷菜"),UIManager.openUI(UIConst.OtherLandUI)):t.target==this.waterAbleImg?(console.log("去浇水"),UIManager.openUI(UIConst.OtherLandUI)):(console.log("查看资料"),GameModel.getInstance().curOtherUser=this.data,UIManager.openUI(UIConst.OtherUserDetailUI))},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e}(AItemRenderer);__reflect(RankItem_All_contri.prototype,"RankItem_All_contri");var RankItem_Friend_coin=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rankItem_friend_coin.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.dataChanged=function(){var t=this.data;this.myRankNum.text=t.index,this.nameTxt.text=t.nickname,this.myChangeTxt.text=t.total_exp,Math.random()<.5?(this.handAbleImg.visible=!0,this.waterAbleImg.visible=!1):(this.handAbleImg.visible=!1,this.waterAbleImg.visible=!0)},e.prototype.click=function(t){if(t.target==this.supportImg){console.log("去赞他");var e=this.data;GameController.getInstance().thumbsUp(parseInt(e.user_id))}else t.target==this.handAbleImg?(console.log("去偷菜"),UIManager.openUI(UIConst.OtherLandUI)):t.target==this.waterAbleImg?(console.log("去浇水"),UIManager.openUI(UIConst.OtherLandUI)):(console.log("查看资料"),GameModel.getInstance().curOtherUser=this.data,UIManager.openUI(UIConst.OtherUserDetailUI))},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e}(AItemRenderer);__reflect(RankItem_Friend_coin.prototype,"RankItem_Friend_coin");var RankItem_Friend_contri=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rankItem_friend_contri.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e.prototype.dataChanged=function(){var t=this.data;this.myRankNum.text=t.index,this.nameTxt.text=t.nickname,this.myChangeTxt.text=t.total_exp,Math.random()<.5?(this.handAbleImg.visible=!0,this.waterAbleImg.visible=!1):(this.handAbleImg.visible=!1,this.waterAbleImg.visible=!0)},e.prototype.click=function(t){if(t.target==this.supportImg){console.log("去赞他");var e=this.data;GameController.getInstance().thumbsUp(parseInt(e.user_id))}else t.target==this.handAbleImg?(console.log("去偷菜"),UIManager.openUI(UIConst.OtherLandUI)):t.target==this.waterAbleImg?(console.log("去浇水"),UIManager.openUI(UIConst.OtherLandUI)):(console.log("查看资料"),GameModel.getInstance().curOtherUser=this.data,UIManager.openUI(UIConst.OtherUserDetailUI))},e.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},e}(AItemRenderer);__reflect(RankItem_Friend_contri.prototype,"RankItem_Friend_contri");var SearchUserItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/addFriendItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickAdd,this)},e.prototype.dataChanged=function(){var t=this,e=this.data;this.nameTxt.text=e.nickname,this.lvNumImg.source="num"+e.level+"_png",egret.callLater(function(){t.lvbg.x=t.nameTxt.x+t.nameTxt.width+10,t.lv.x=t.lvbg.x+10,t.lvNumImg.x=t.lvbg.x+40},this)},e.prototype.clickAdd=function(){var t=this.data;GameController.getInstance().addFriend(parseInt(t.id)),UIManager.openUI(UIConst.TipAddFriendUI,LayerManager.Layer_Tip)},e.prototype.onRemove=function(){this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickAdd,this)},e}(AItemRenderer);__reflect(SearchUserItem.prototype,"SearchUserItem");var RuleUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/rule.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.clickLeft()},e.prototype.initListener=function(){this.registerEvent(this.leftBtn,egret.TouchEvent.TOUCH_TAP,this.clickLeft,this),this.registerEvent(this.rightBtn,egret.TouchEvent.TOUCH_TAP,this.clickRight,this)},e.prototype.clickLeft=function(){this.ruleGroup.visible=!0,this.descGroup.visible=!1,this.leftBtn.enabled=!1,this.rightBtn.enabled=!0},e.prototype.clickRight=function(){this.ruleGroup.visible=!1,this.descGroup.visible=!0,this.leftBtn.enabled=!0,this.rightBtn.enabled=!1},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(RuleUI.prototype,"RuleUI");var SetUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/set.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.skinList.itemRenderer=SkinItem,this.skinList.useVirtualLayout=!1;var e=new eui.ArrayCollection;e.addItem({name:"默认",isDefault:!0}),e.addItem({name:"皮肤名称",isDefault:!1}),e.addItem({name:"皮肤名称",isDefault:!1}),e.addItem({name:"皮肤名称",isDefault:!1}),e.addItem({name:"皮肤名称",isDefault:!1}),e.addItem({name:"皮肤名称",isDefault:!1}),e.addItem({name:"皮肤名称",isDefault:!1}),this.skinList.dataProvider=e,this.clickMsgSet()},e.prototype.initListener=function(){this.registerEvent(this.msgSetBtn,egret.TouchEvent.TOUCH_TAP,this.clickMsgSet,this),this.registerEvent(this.landSetBtn,egret.TouchEvent.TOUCH_TAP,this.clickLandSet,this)},e.prototype.clickMsgSet=function(){this.msgSetGroup.visible=!0,this.landSetGroup.visible=!1,this.landSetBtn.y=this.msgSetGroup.y+this.msgSetGroup.height+10},e.prototype.clickLandSet=function(){this.msgSetGroup.visible=!1,this.landSetGroup.visible=!0,this.landSetBtn.y=this.msgSetBtn.y+this.msgSetBtn.height+10,this.landSetGroup.y=this.landSetBtn.y+this.landSetBtn.height+10,console.log(this.landSetGroup)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(SetUI.prototype,"SetUI");var SkinItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/setSkinTypeItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){},e.prototype.dataChanged=function(){this.data&&(this.nameTxt.text=this.data.name,this.data.isDefault?this.selectedImg.visible=!0:this.selectedImg.visible=!1)},e.prototype.onRemove=function(){},e}(AItemRenderer);__reflect(SkinItem.prototype,"SkinItem");var ShopFruitItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop_fruitItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addToShopCar,this);this.data,GameModel.getInstance().getShopCarData()},e.prototype.dataChanged=function(){var t=this.data;this.titleTxt.text=t.name,this.costTxt.text=t.buy_gold+"";var e=t.buy_gold?t.buy_gold:0;this.coseMoneyTxt.text="(价值"+e/100+"元)";GameModel.getInstance().getShopCarData()},e.prototype.addToShopCar=function(){var t=this.data;GameModel.getInstance().addShopCarData(t.id)},e.prototype.removeFromShopCar=function(){var t=this.data;
GameModel.getInstance().reduceShopCarData(t.id)},e.prototype.onRemove=function(){this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addToShopCar,this)},e}(AItemRenderer);__reflect(ShopFruitItem.prototype,"ShopFruitItem");var ShopSeedAlertUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop_seedAlert.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this)},e.prototype.initListener=function(){this.registerEvent(this.addBtn,egret.TouchEvent.TOUCH_TAP,this.add,this),this.registerEvent(this.closeBtn,egret.TouchEvent.TOUCH_TAP,this.dispose,this)},e.prototype.add=function(){GameModel.getInstance().addShopCarData(GameModel.getInstance().curSeedDetailId),this.dispose()},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(ShopSeedAlertUI.prototype,"ShopSeedAlertUI");var ShopSeedItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop_seedItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},e.prototype.dataChanged=function(){var t=this.data;this.titleTxt.text=t.name,this.descTxt.text=t.desc,this.costTxt.text=(t.buy_gold?t.buy_gold:0)+"果喵币";var e=GameModel.getInstance().getShopCarData();this.updateShopCarData(e)},e.prototype.onClick=function(t){t.target==this.addBtn?this.addToShopCar():this.showSeedDetail()},e.prototype.showSeedDetail=function(){var t=this.data;GameModel.getInstance().curSeedDetailId=t.id,UIManager.openUI(UIConst.ShopSeedAlertUI,LayerManager.Layer_Tip)},e.prototype.addToShopCar=function(){var t=this.data;GameModel.getInstance().addShopCarData(t.id)},e.prototype.removeFromShopCar=function(){var t=this.data;GameModel.getInstance().reduceShopCarData(t.id)},e.prototype.updateShopCarData=function(t){var e=this.data;t[e.id]>0?this.addBtn.enabled=!1:this.addBtn.enabled=!0},e.prototype.onRemove=function(){this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addToShopCar,this)},e}(AItemRenderer);__reflect(ShopSeedItem.prototype,"ShopSeedItem");var ShopToolItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop_toolItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addToShopCar,this),this.reduceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.removeFromShopCar,this);var t=this.data,e=GameModel.getInstance().getShopCarData();t&&this.updateShopCarData(e)},e.prototype.dataChanged=function(){var t=this.data;if(t){this.moreToolTip.visible=!1,this.titleTxt.text=t.name,this.descTxt.text=t.desc,this.costTxt.text=(t.buy_gold?t.buy_gold:0)+"果喵币";var e=GameModel.getInstance().getShopCarData();this.updateShopCarData(e)}else this.moreToolTip.visible=!0},e.prototype.addToShopCar=function(){var t=this.data;GameModel.getInstance().addShopCarData(t.id)},e.prototype.removeFromShopCar=function(){var t=this.data;GameModel.getInstance().reduceShopCarData(t.id)},e.prototype.updateShopCarData=function(t){var e=this.data;if(e){var n=0;t[e.id]&&(n=t[e.id]),n?(this.numTxt.text=n+"",this.numTxt.visible=!0,this.reduceBtn.visible=!0):(this.numTxt.text="0",this.numTxt.visible=!1,this.reduceBtn.visible=!1)}},e.prototype.onRemove=function(){this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addToShopCar,this),this.reduceBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.removeFromShopCar,this)},e}(AItemRenderer);__reflect(ShopToolItem.prototype,"ShopToolItem");var ShopUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shop.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),UIManager.openUI(UIConst.ShopCarDetailUI,LayerManager.Layer_Tip),this.ac_seed=new eui.ArrayCollection,this.ac_tool=new eui.ArrayCollection,this.ac_fruit=new eui.ArrayCollection,this.seedList.itemRenderer=ShopSeedItem,this.toolList.itemRenderer=ShopToolItem,this.fruitList.itemRenderer=ShopFruitItem,this.seedList.dataProvider=this.ac_seed,this.toolList.dataProvider=this.ac_tool,this.fruitList.dataProvider=this.ac_fruit,this.seedList.useVirtualLayout=!1,this.toolList.useVirtualLayout=!1,this.fruitList.useVirtualLayout=!1;var e=GameModel.getInstance().getShopItems();this.ac_seed.removeAll(),this.ac_tool.removeAll(),this.ac_fruit.removeAll();for(var n=0;n<e.length;n++){var i=GameModel.getInstance().getItemById(e[n].id);i.buy_gold=e[n].gold,1==i.type1?this.ac_seed.addItem(i):2==i.type1?this.ac_tool.addItem(i):3==i.type1&&this.ac_fruit.addItem(i)}this.ac_tool.addItem(null),this.ac_seed.refresh(),this.ac_tool.refresh(),this.ac_fruit.refresh()},e.prototype.initListener=function(){this.registerEvent(this.chooseSeed,egret.TouchEvent.TOUCH_TAP,this.clickChooseSeed,this),this.registerEvent(this.chooseTool,egret.TouchEvent.TOUCH_TAP,this.clickChooseTool,this),this.registerEvent(this.chooseFruit,egret.TouchEvent.TOUCH_TAP,this.clickChooseFruit,this),this.addRegister(NotifyConst.Notify_ShopCar,this.onShopCarChange,this)},e.prototype.onShopCarChange=function(){for(var t=GameModel.getInstance().getShopCarData(),e=0;e<this.ac_seed.length;e++)this.seedList.getChildAt(e).updateShopCarData(t);for(e=0;e<this.ac_tool.length;e++)this.toolList.getChildAt(e).updateShopCarData(t)},e.prototype.clickChooseSeed=function(){this.chooseSeed.source="choice_png",this.chooseTool.source="choice_not_png",this.chooseFruit.source="choice_not_png",this.seedGroup.visible=!0,this.toolGroup.visible=!1,this.fruitGroup.visible=!1},e.prototype.clickChooseTool=function(){this.chooseSeed.source="choice_not_png",this.chooseTool.source="choice_png",this.chooseFruit.source="choice_not_png",this.seedGroup.visible=!1,this.toolGroup.visible=!0,this.fruitGroup.visible=!1},e.prototype.clickChooseFruit=function(){this.chooseSeed.source="choice_not_png",this.chooseTool.source="choice_not_png",this.chooseFruit.source="choice_png",this.seedGroup.visible=!1,this.toolGroup.visible=!1,this.fruitGroup.visible=!0},e.prototype.dispose=function(){t.prototype.dispose.call(this),UIManager.closeUI(UIConst.ShopCarDetailUI),this.removeRegister(this)},e}(BaseUI);__reflect(ShopUI.prototype,"ShopUI");var ShopCarDetailItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shopCarDetailItem.exml",e}return __extends(e,t),e.prototype.onAdd=function(){this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addCount,this),this.reduceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reduceCount,this)},e.prototype.dataChanged=function(){this.nameTxt.text=this.data.name,this.numTxt.text=this.data.count,this.costTxt.text=this.data.count*this.data.cost+""},e.prototype.addCount=function(){GameModel.getInstance().addShopCarData(this.data.id)},e.prototype.reduceCount=function(){GameModel.getInstance().reduceShopCarData(this.data.id)},e.prototype.onRemove=function(){this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addCount,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.reduceCount,this)},e}(AItemRenderer);__reflect(ShopCarDetailItem.prototype,"ShopCarDetailItem");var ShopCarDetailUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/shopCarDetail.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.headGroup.visible=!1,this.scroller.visible=!1,this.choosedList.itemRenderer=ShopCarDetailItem,this.ac=new eui.ArrayCollection,this.choosedList.dataProvider=this.ac,this.choosedList.useVirtualLayout=!1},e.prototype.initListener=function(){this.registerEvent(this.shopcarImg,egret.TouchEvent.TOUCH_TAP,this.clickCar,this),this.registerEvent(this.payBtn,egret.TouchEvent.TOUCH_TAP,this.clickPay,this),this.registerEvent(this.clearBtn,egret.TouchEvent.TOUCH_TAP,this.clickClearCar,this),this.addRegister(NotifyConst.Notify_ShopCar,this.updateShopCar,this)},e.prototype.updateShopCar=function(){var t=this,e=GameModel.getInstance().getShopCarData();this.ac.removeAll();var n=0,i=0;for(var o in e){var r=GameModel.getInstance().getItemById(parseInt(o));r&&(n+=e[o],i+=r.buy_gold*e[o],this.ac.addItem({id:o,name:r.name,cost:r.buy_gold,count:e[o]}))}this.ac.refresh(),this.updateScroller(),this.shopCountTxt.text=n+"",this.payCountTxt.text=i+"",setTimeout(function(){t.payCountTxt0.x=t.payCountTxt.x+t.payCountTxt.textWidth+"20"},100)},e.prototype.clickCar=function(){this.headGroup.visible?(this.headGroup.visible=!1,this.scroller.visible=!1):(this.headGroup.visible=!0,this.scroller.visible=!0,this.updateShopCar())},e.prototype.clickClearCar=function(){GameModel.getInstance().clearShopCar()},e.prototype.clickPay=function(){UIManager.openUI(UIConst.PayUI)},e.prototype.updateScroller=function(){var t=this;this.scroller.visible&&egret.callLater(function(){var e=874;t.ac.length<=8&&(e=100*t.ac.length),t.scroller.height=874>e?e:874,t.headGroup.bottom=t.scroller.height+t.scroller.bottom},this)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this)},e}(BaseUI);__reflect(ShopCarDetailUI.prototype,"ShopCarDetailUI");var SignUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/sign.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),GameController.getInstance().getSignList()},e.prototype.initListener=function(){this.registerEvent(this.btn_close,egret.TouchEvent.TOUCH_TAP,this.clickClose,this),this.registerEvent(this.btn_sign,egret.TouchEvent.TOUCH_TAP,this.clickSign,this),this.addRegister(NotifyConst.Notify_SignList,this.onSignList,this)},e.prototype.onSignList=function(t){console.log("收到签到",t);for(var e=1;7>=e;e++)this["sign"+e].source="nosign"+e+"_png";for(var n=0;n<t.list.length;n++){var i=t.list[n],o=this.getDay(i.week,i.day);this["sign"+o].source="signed"+o+"_png"}},e.prototype.getDay=function(t,e){var n=parseInt(t.split("-")[0]),i=parseInt(t.split("-")[1]),o=parseInt(t.split("-")[2]),r=parseInt(e.split("-")[0]),s=parseInt(e.split("-")[1]),a=parseInt(e.split("-")[2]);return n==r?this.getDaysByMonthAndDay(r,s,a)-this.getDaysByMonthAndDay(n,i,o)+1:a+31-o},e.prototype.getDaysByMonthAndDay=function(t,e,n){for(var i=[1,3,5,7,8,10,12],o=0,r=1;e>r;r++)o+=i.indexOf[r]>-1?31:2==r?t%4==0?29:28:30;return o+n},e.prototype.clickSign=function(){console.log("发出签到"),GameController.getInstance().sendSign()},e.prototype.clickClose=function(){UIManager.closeUI(UIConst.SignUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(SignUI.prototype,"SignUI");var StoreUI=function(t){function e(){var e=t.call(this)||this;return e.computearr=[],e.skinName="resource/skins/store.exml",e}return __extends(e,t),e.prototype.initSetting=function(){var e=this;t.prototype.initSetting.call(this),GameController.getInstance().getStoreInfo(),this.intervalId=setInterval(function(){e.computeTime()},100),this.onStoreInfo(null)},e.prototype.initListener=function(){this.registerEvent(this.btn_close,egret.TouchEvent.TOUCH_TAP,this.clickClose,this),this.addRegister(NotifyConst.Notify_StoreInfo,this.onStoreInfo,this)},e.prototype.onStoreInfo=function(t){console.log("仓库ui收到仓库信息 ",t);var e=[],n=[],i=0;if(t&&t.list&&t.list.length>0)for(var o=0;o<t.list.length;o++){var r=t.list[o],s=GameModel.getInstance().getItemById(r.item_id);1==s.type1?n.push(r):2==s.type1?e.push(r):3==s.type1&&(i=r.num)}if(e[0]?(this.defaultTool0.source="shop_fertilizer_png",this.defaultTool0.width=117,this.defaultTool0.height=117):(this.defaultTool0.source="btn_add_png",this.defaultTool0.width=92,this.defaultTool0.height=92),e[1]?(this.defaultTool1.source="store_insurance",this.defaultTool1.width=117,this.defaultTool1.height=117):(this.defaultTool1.source="btn_add_png",this.defaultTool1.width=92,this.defaultTool1.height=92),n[0]){this.defaultSeed0.source="seed1_png";var a=GameModel.getInstance().getServerTime(),c=n[0].expire_time-a,h=new Date;h.setSeconds(c),this.seedTime0.text=c>0?h.getUTCHours()+":"+h.getUTCMinutes()+":"+h.getUTCSeconds()+"后结束播种":"结束播种",this.computearr.push({expire_time:n[0].expire_time,txt:this.seedTime0})}else this.defaultSeed0.source="seedEmpty_png",this.seedTime0.text="没有种子，无法播种";if(n[1]){this.defaultSeed1.source="seed1_png";var a=GameModel.getInstance().getServerTime(),c=n[1].expire_time-a,h=new Date;h.setSeconds(c),this.seedTime1.text=c>0?h.getUTCHours()+":"+h.getUTCMinutes()+":"+h.getUTCSeconds()+"后结束播种":"结束播种",this.computearr.push({expire_time:n[1].expire_time,txt:this.seedTime1})}else this.defaultSeed1.source="seedEmpty_png",this.seedTime1.text="没有种子，无法播种";this.fruitWeightTxt.text=i+"斤"},e.prototype.computeTime=function(){for(var t=0;t<this.computearr.length;t++){var e=GameModel.getInstance().getServerTime(),n=this.computearr[t].expire_time-e,i=new Date;i.setSeconds(n);var o=n>0?i.getUTCHours()+":"+i.getUTCMinutes()+":"+i.getUTCSeconds()+"后结束播种":"结束播种";this.computearr[t].txt.text=o}},e.prototype.clickClose=function(){UIManager.closeUI(UIConst.StoreUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeRegister(this),clearInterval(this.intervalId),this.computearr=[],this.itemGroup.removeChildren()},e}(BaseUI);__reflect(StoreUI.prototype,"StoreUI");var TopBarUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/topBarSkin.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.touchEnabled=!1,this.touchChildren=!0},e.prototype.initListener=function(){this.registerEvent(this.leftBtn,egret.TouchEvent.TOUCH_TAP,this.clickLeft,this),this.registerEvent(this.homeBtn,egret.TouchEvent.TOUCH_TAP,this.clickHome,this)},e.prototype.clickLeft=function(){(UIManager.isUIOpen(UIConst.RuleUI)||UIManager.isUIOpen(UIConst.LastActivityUI))&&(UIManager.closeUI(UIConst.TopBarUI),UIManager.openUI(UIConst.WelcomeUI)),UIManager.isUIOpen(UIConst.OtherUserDetailUI)||UIManager.isUIOpen(UIConst.OtherLandUI)?UIManager.openUI(UIConst.RankFriendContributeUI):UIManager.isUIOpen(UIConst.PayUI)?UIManager.openUI(UIConst.ShopUI):UIManager.isUIOpen(UIConst.ContributeDetailUI)||UIManager.isUIOpen(UIConst.CoinDetailUI)||UIManager.isUIOpen(UIConst.AddressManageUI)||UIManager.isUIOpen(UIConst.HonorWallUI)||UIManager.isUIOpen(UIConst.MyOrderUI)||UIManager.isUIOpen(UIConst.SetUI)||UIManager.isUIOpen(UIConst.HonorDetailUI)?UIManager.openUI(UIConst.UserMenuUI):UIManager.isUIOpen(UIConst.AddAddressUI)?UIManager.openUI(UIConst.AddressManageUI):(UIManager.isUIOpen(UIConst.UserMenuUI)||UIManager.isUIOpen(UIConst.RadioUI)||UIManager.isUIOpen(UIConst.ShopUI)||UIManager.isUIOpen(UIConst.ChargeUI)||UIManager.isUIOpen(UIConst.RankFriendContributeUI)||UIManager.isUIOpen(UIConst.RankAllCoinUI)||UIManager.isUIOpen(UIConst.RankAllContributeUI)||UIManager.isUIOpen(UIConst.RankFriendCoinUI)||UIManager.isUIOpen(UIConst.RankFriendContributeUI))&&(UIManager.closeUI(UIConst.TopBarUI),UIManager.openUI(UIConst.HomeUI))},e.prototype.clickHome=function(){UIManager.closeUI(UIConst.TopBarUI),UIManager.isUIOpen(UIConst.RuleUI)?UIManager.openUI(UIConst.WelcomeUI):UIManager.isUIOpen(UIConst.LastActivityUI)?UIManager.openUI(UIConst.HomeUI):UIManager.openUI(UIConst.HomeUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(TopBarUI.prototype,"TopBarUI");var UserMenuUI=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/skins/userMenu.exml",e}return __extends(e,t),e.prototype.initSetting=function(){t.prototype.initSetting.call(this),this.initUserData()},e.prototype.initListener=function(){console.log("initListener"),this.registerEvent(this.attributeTxt,egret.TouchEvent.TOUCH_TAP,this.goContributeDetail,this),this.registerEvent(this.attributeTxtBg,egret.TouchEvent.TOUCH_TAP,this.goContributeDetail,this),this.registerEvent(this.coinTxt,egret.TouchEvent.TOUCH_TAP,this.goCoinDetail,this),this.registerEvent(this.coinTxtBg,egret.TouchEvent.TOUCH_TAP,this.goCoinDetail,this),this.registerEvent(this.btn_charge,egret.TouchEvent.TOUCH_TAP,this.goCharge,this),this.registerEvent(this.btn_shop,egret.TouchEvent.TOUCH_TAP,this.goShop,this),this.registerEvent(this.btn_address,egret.TouchEvent.TOUCH_TAP,this.goAddress,this),this.registerEvent(this.btn_order,egret.TouchEvent.TOUCH_TAP,this.goOrder,this),this.registerEvent(this.btn_store,egret.TouchEvent.TOUCH_TAP,this.goStore,this),this.registerEvent(this.btn_rank,egret.TouchEvent.TOUCH_TAP,this.goRank,this),this.registerEvent(this.btn_coinCharge,egret.TouchEvent.TOUCH_TAP,this.goCharge,this),this.registerEvent(this.btn_honor,egret.TouchEvent.TOUCH_TAP,this.goHonor,this),this.registerEvent(this.btn_radio,egret.TouchEvent.TOUCH_TAP,this.goRadio,this),this.registerEvent(this.btn_set,egret.TouchEvent.TOUCH_TAP,this.goSet,this)},e.prototype.initUserData=function(){this.nameTxt.text=GameModel.getInstance().getNickname(),this.LevelTxtImg.source="num"+GameModel.getInstance().getLevel()+"_png",this.gameIdTxt.text="游戏ID： "+GameModel.getInstance().getId(),this.contri_number.text=GameModel.getInstance().getContribute()+"/"+GameModel.getInstance().getTotalContribute(),this.coin_number.text=GameModel.getInstance().getGold()+""},e.prototype.goContributeDetail=function(){console.log("goigog"),UIManager.openUI(UIConst.ContributeDetailUI)},e.prototype.goCoinDetail=function(){UIManager.openUI(UIConst.CoinDetailUI)},e.prototype.goShop=function(){UIManager.openUI(UIConst.ShopUI)},e.prototype.goAddress=function(){UIManager.openUI(UIConst.AddressManageUI)},e.prototype.goOrder=function(){UIManager.openUI(UIConst.MyOrderUI)},e.prototype.goStore=function(){UIManager.openUI(UIConst.StoreUI,LayerManager.Layer_Tip)},e.prototype.goRank=function(){UIManager.openUI(UIConst.RankFriendContributeUI)},e.prototype.goCharge=function(){UIManager.openUI(UIConst.ChargeUI)},e.prototype.goHonor=function(){UIManager.openUI(UIConst.HonorWallUI)},e.prototype.goRadio=function(){UIManager.openUI(UIConst.RadioUI)},e.prototype.goSet=function(){UIManager.openUI(UIConst.SetUI)},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(BaseUI);__reflect(UserMenuUI.prototype,"UserMenuUI");var MD5Util=function(){function MD5Util(){}return MD5Util.parse=function(str){return this.md5||(this.md5=eval("new YaMD5()")),this.md5.start(),this.md5.appendStr(str),this.md5.end()},MD5Util}();__reflect(MD5Util.prototype,"MD5Util");var vo;!function(t){var e=function(){function t(){}return t}();t.AddressInfo=e,__reflect(e.prototype,"vo.AddressInfo");var n=function(){function t(){}return t}();t.AddressItem=n,__reflect(n.prototype,"vo.AddressItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.AnnounceInfo=e,__reflect(e.prototype,"vo.AnnounceInfo");var n=function(){function t(){}return t}();t.AnnounceItem=n,__reflect(n.prototype,"vo.AnnounceItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.Config=e,__reflect(e.prototype,"vo.Config");var n=function(){function t(){}return t}();t.image_listItem=n,__reflect(n.prototype,"vo.image_listItem");var i=function(){function t(){}return t}();t.Achievement_listItem=i,__reflect(i.prototype,"vo.Achievement_listItem");var o=function(){function t(){}return t}();t.CommonItem=o,__reflect(o.prototype,"vo.CommonItem");var r=function(){function t(){}return t}();t.Contribution_listItem=r,__reflect(r.prototype,"vo.Contribution_listItem");var s=function(){function t(){}return t}();t.Crop_listItem=s,__reflect(s.prototype,"vo.Crop_listItem");var a=function(){function t(){}return t}();t.Gift_bagItem=a,__reflect(a.prototype,"vo.Gift_bagItem");var c=function(){function t(){}return t}();t.InitItem=c,__reflect(c.prototype,"vo.InitItem");var h=function(){function t(){}return t}();t.Item_listItem=h,__reflect(h.prototype,"vo.Item_listItem");var d=function(){function t(){}return t}();t.Pay_listItem=d,__reflect(d.prototype,"vo.Pay_listItem");var l=function(){function t(){}return t}();t.Player_levelItem=l,__reflect(l.prototype,"vo.Player_levelItem");var p=function(){function t(){}return t}();t.SignItemConfig=p,__reflect(p.prototype,"vo.SignItemConfig");var u=function(){function t(){}return t}();t.Store_listItem=u,__reflect(u.prototype,"vo.Store_listItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.ContributeDetailInfo=e,__reflect(e.prototype,"vo.ContributeDetailInfo");var n=function(){function t(){}return t}();t.ContributeDetailItem=n,__reflect(n.prototype,"vo.ContributeDetailItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.FarmInfo=e,__reflect(e.prototype,"vo.FarmInfo");var n=function(){function t(){}return t}();t.FarmItem=n,__reflect(n.prototype,"vo.FarmItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.FriendListInfo=e,__reflect(e.prototype,"vo.FriendListInfo");var n=function(){function t(){}return t}();t.FriendListItem=n,__reflect(n.prototype,"vo.FriendListItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.FriendRequests=e,__reflect(e.prototype,"vo.FriendRequests");var n=function(){function t(){}return t}();t.FriendRequestsItem=n,__reflect(n.prototype,"vo.FriendRequestsItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.HarvestInfo=e,__reflect(e.prototype,"vo.HarvestInfo")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.HonorInfo=e,__reflect(e.prototype,"vo.HonorInfo");var n=function(){function t(){}return t}();t.HonorItem=n,__reflect(n.prototype,"vo.HonorItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.OrderInfo=e,__reflect(e.prototype,"vo.OrderInfo");var n=function(){function t(){}return t}();t.OrderItem=n,__reflect(n.prototype,"vo.OrderItem");var i=function(){function t(){}return t}();t.OrderOneItem=i,__reflect(i.prototype,"vo.OrderOneItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.RankAllInfo=e,__reflect(e.prototype,"vo.RankAllInfo");var n=function(){function t(){}return t}();t.SearchUserResult=n,__reflect(n.prototype,"vo.SearchUserResult");var i=function(){function t(){}return t}();t.RankAllItem=i,__reflect(i.prototype,"vo.RankAllItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.SearchUserInfo=e,__reflect(e.prototype,"vo.SearchUserInfo")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.SignInfo=e,__reflect(e.prototype,"vo.SignInfo");var n=function(){function t(){}return t}();t.SignItem=n,__reflect(n.prototype,"vo.SignItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.StealFoodInfo=e,__reflect(e.prototype,"vo.StealFoodInfo")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.StoreInfo=e,__reflect(e.prototype,"vo.StoreInfo");var n=function(){function t(){}return t}();t.StoreItem=n,__reflect(n.prototype,"vo.StoreItem")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.UserInfo=e,__reflect(e.prototype,"vo.UserInfo")}(vo||(vo={}));var vo;!function(t){var e=function(){function t(){}return t}();t.YesterdayHarvestRankInfo=e,__reflect(e.prototype,"vo.YesterdayHarvestRankInfo");var n=function(){function t(){}return t}();t.YesterdayHarvestRankItem=n,__reflect(n.prototype,"vo.YesterdayHarvestRankItem")}(vo||(vo={}));